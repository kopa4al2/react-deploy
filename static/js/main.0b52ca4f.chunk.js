(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t){var a={Authorization:"Basic "+btoa("kid_r1ynbbg6Q:33903aebaffd4a3b944250b832bd81f3")};btoa("kid_r1ynbbg6Q:f55dd3810f61465c98c4fec7525a6ba9");e.exports={API_BASE_URL:"https://baas.kinvey.com/",API_KEY:"kid_r1ynbbg6Q",BASIC_AUTH_HEADER:a}},,,,,,,,function(e,t){e.exports={MONTHS_MAP:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"Semptember",9:"October",10:"November",11:"December"},DAYS_MAP:{0:"MON",1:"TUE",2:"WED",3:"THU",4:"FRI",5:"SAT",6:"SUN",7:"SUN"}}},,,,,,function(e,t,a){},,,,function(e,t,a){e.exports=a(79)},,,,,,,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);a(26);var n=a(0),s=a.n(n),i=a(14),r=a.n(i);a(32),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(2),c=a(3),l=a(5),u=a(4),h=a(6),d=a(8),m=a(81),g=(a(34),a(80)),p=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleLinkClick",value:function(e){var t=Array(this.state.totalLinks).fill("");t[e]="nav-link-active",this.setState({linksStatus:t})}},{key:"render",value:function(){return s.a.createElement("nav",{className:"navigation-bar"},s.a.createElement("div",{className:"logo-container"},s.a.createElement("h2",null,"Calendar")),s.a.createElement("div",{className:"url-container"},s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(g.a,{to:"/"},"Home")),s.a.createElement("li",null,s.a.createElement(g.a,{to:"/my_notes"},"My notes")),s.a.createElement("li",null,s.a.createElement(g.a,{to:"/my_days"},"My Days")))))}}]),t}(n.Component),v=(a(38),a(41),a(21),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"day-block ".concat(this.props.className),onClick:function(){return e.props.clickHandler(e)}},this.props.value)}}]),t}(s.a.Component)),f=a(15),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={currentMonth:a.props.currentMonth},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.currentMonth)!==JSON.stringify(e.currentMonth)&&this.setState({currentMonth:e.currentMonth})}},{key:"renderBlock",value:function(e,t,a){return s.a.createElement(v,{key:a,id:a,value:e,className:t,clickHandler:this.props.clickHandler})}},{key:"renderHeader",value:function(){for(var e=[],t=0;t<7;t++)e.push(this.renderBlock(f.DAYS_MAP[t],"block-heading","h-".concat(t)));return e}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendar-body"},this.renderHeader(),this.state.currentMonth.map(function(t,a){return e.renderBlock(t.dayValue,t.dayClass,"d-"+a)}))}}]),t}(s.a.Component),b=(a(44),a(46),function(e){return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()}),k=function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];return new Date(t,a,n,0,0,0)},E=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},S=function(e,t){return e.id===t.id&&e.authToken===t.authToken},O=(a(48),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"loading-background"},s.a.createElement("div",{className:"loading-wrapper"},s.a.createElement("div",{className:"loading-inner"})))}}]),t}(s.a.Component)),C=(a(50),document.getElementById("message-box-container")),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={animationClass:"hide"},a.messageBox=document.createElement("div"),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;"success"!==this.props.type&&"info"!==this.props.type||setTimeout(function(){e.closeMessageBox()},3e3),this.handleContainerClassChange("show"),C.appendChild(this.messageBox),setTimeout(function(){e.setState({animationClass:"show"})},10)}},{key:"componentWillUnmount",value:function(){this.handleContainerClassChange("hide")}},{key:"closeMessageBox",value:function(){var e=this;this.setState({animationClass:"hide"}),setTimeout(function(){e.props.closeFunction&&e.props.closeFunction(),C.contains(e.messageBox)&&C.removeChild(e.messageBox)},1e3)}},{key:"handleBoxClick",value:function(){this.closeMessageBox()}},{key:"handleContainerClassChange",value:function(e){"show"===e.toLowerCase()?(C.classList.add("show"),C.classList.remove("hide")):"hide"===e.toLowerCase()&&(C.classList.add("hide"),C.classList.remove("show"))}},{key:"render",value:function(){var e=this;return r.a.createPortal(s.a.createElement("div",{onClick:function(){return e.handleBoxClick()},className:"message-box-content "+this.props.type+"  "+this.state.animationClass},s.a.createElement("div",{className:"message-box-message"},s.a.createElement("span",{className:"message-type"},this.props.type.charAt(0).toUpperCase()+this.props.type.slice(1)+": "),this.props.message)),this.messageBox)}}]),t}(s.a.Component);P.defaultProps={type:"info",message:"Message text"};var w=P,M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={note:"",isLoading:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"showMessageBox",value:function(e,t){this.props.openMessageBox(e,t)}},{key:"emptyTextArea",value:function(){this.setState({note:""})}},{key:"stopLoading",value:function(){this.setState({isLoading:!1})}},{key:"updateNote",value:function(e){this.setState({note:e.target.value})}},{key:"submitNote",value:function(e){var t=this;if(e.preventDefault(),""!==this.state.note){var a={};a.dayId=b(this.props.activeDate),a.noteContent=this.state.note;var n,s=this.emptyTextArea.bind(this),i=this.stopLoading.bind(this),r=this.showMessageBox.bind(this);this.setState({isLoading:!0}),this.props.authenticationService.getCurrentUser().then(function(e){n=e,t.props.notesService.addNote(a,n).then(function(e){r("success","Added a note"),s(),i()},function(e){r("error","Could not add note"),i()})},function(e){r("error","You are not logged in")})}}},{key:"render",value:function(){var e,t=this;return e=this.state.isLoading?s.a.createElement(O,null):s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{value:this.state.note,rows:"3",className:"form-control",onChange:function(e){return t.updateNote(e)}})),s.a.createElement("form",{className:"add-note-form"},e,s.a.createElement("button",{onClick:function(e){return t.submitNote(e)},className:"btn btn-primary"},"Add note"))}}]),t}(s.a.Component),j=(a(52),a(24)),N=(a(54),a(17)),D=a(11),I=a(16);N.b.add(I.a,I.b);var L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={pager:{}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.items&&this.props.items.length&&this.resetPage()}},{key:"componentDidUpdate",value:function(e,t){this.props.items!==e.items&&this.resetPage()}},{key:"resetPage",value:function(){this.setPage(this.props.initialPage)}},{key:"setPage",value:function(e){var t=this.props,a=t.items,n=t.pageSize,s=this.state.pager;if(!(e<1||e>s.totalPages)){var i;i=this.state.pager.currentPage<e?"animate-left":this.state.pager.currentPage>e?"animate-right":"",s=this.getPager(a.length,e,n);var r=a.slice(s.startIndex,s.endIndex+1);this.setState({pager:s}),this.props.onChangePage(r,i)}}},{key:"getPager",value:function(e,t,a){t=t||1,a=a||10;var n,s,i=Math.ceil(e/a);i<=10?(n=1,s=i):t<=6?(n=1,s=10):t+4>=i?(n=i-9,s=i):(n=t-5,s=t+4);var r=(t-1)*a,o=Math.min(r+a-1,e-1),c=Object(j.a)(Array(s+1-n).keys()).map(function(e){return n+e});return{totalItems:e,currentPage:t,pageSize:a,totalPages:i,startPage:n,endPage:s,startIndex:r,endIndex:o,pages:c}}},{key:"render",value:function(){var e=this,t=this.state.pager;return!t.pages||t.pages.length<=1?null:s.a.createElement("ul",{className:"pagination"},s.a.createElement("div",{className:"pag-wrapper"},s.a.createElement("li",{className:1===t.currentPage?"disabled":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(t.currentPage-1)}},s.a.createElement(D.a,{icon:"angle-left"}))),t.pages.map(function(a,n){return s.a.createElement("li",{key:n,className:t.currentPage===a?"active":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(a)}},a))}),s.a.createElement("li",{className:t.currentPage===t.totalPages?"disabled":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(t.currentPage+1)}},s.a.createElement(D.a,{icon:"angle-right"})))))}}]),t}(s.a.Component);L.defaultProps={initialPage:1,pageSize:10};var x=L,U=(a(57),document.getElementById("root")),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isShown:!1,animationClass:"hide",transitionEnded:!1,customStyle:{}},a.modal=document.createElement("div"),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.customStyle&&this.setState({customStyle:this.props.customStyle}),U.appendChild(this.modal)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.isOpen)this.setState({isShown:!0}),setTimeout(function(){t.setState({animationClass:"show"})},10);else{this.setState({animationClass:"hide"});setTimeout(function(){t.setState({isShown:!1})},300)}}},{key:"render",value:function(){return r.a.createPortal(s.a.createElement("div",{className:"modal-box-background ".concat(this.state.isShown?"shown":"")},s.a.createElement("div",{style:this.state.customStyle,className:"modal-box-content ".concat(this.state.animationClass)},this.props.children)),this.modal)}}]),t}(s.a.Component),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).scrollPosition=0,a.state={loggedInUser:a.props.loggedInUser,isLoggedIn:a.props.isLoggedIn,notes:null,ajaxStarted:!1,currentNotesPage:[],notesAnimation:"",modalData:{isOpen:!1,idToDelete:"",animateClass:""}},a.handlePageChange=a.handlePageChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"showMessageBox",value:function(e,t){this.props.openMessageBox(e,t)}},{key:"initLoggedIn",value:function(){var e=this;this.props.authenticationService.getCurrentUser().then(function(t){e.setState({loggedInUser:t}),e.fetchNotes().then(function(t){return e.setState({notes:t})})},function(t){e.showMessageBox("error","Please log in")})}},{key:"componentWillMount",value:function(){this.props.isLoggedIn&&this.initLoggedIn()}},{key:"componentWillUpdate",value:function(e){var t=this;null!=r.a.findDOMNode(this)&&(this.scrollPosition=window.scrollY),this.state.isLoggedIn&&!this.state.loggedInUser&&this.props.authenticationService.getCurrentUser().then(function(e){t.setState({loggedInUser:e})},function(e){t.showMessageBox("error","Please log in")}),e.isLoggedIn!==this.state.isLoggedIn&&(e.isLoggedIn?e.isLoggedIn&&this.props.authenticationService.getCurrentUser().then(function(e){t.fetchNotes(e).then(function(e){return t.setState({notes:e})}),t.setState({isLoggedIn:!0,loggedInUser:e})},function(e){t.showMessageBox("error","Please log in")}):this.setState({isLoggedIn:!1,loggedInUser:null,notes:null})),this.state.isLoggedIn&&this.state.loggedInUser&&(E(this.props.activeDate,e.activeDate)||this.setState({notes:null,ajaxStarted:!1}),this.state.notes&&(!e.isThisViewActive||this.props.isThisViewActive)||this.state.ajaxStarted||e===this.props||(this.setState({ajaxStarted:!0}),this.fetchNotes().then(function(e){t.setState({ajaxStarted:!1}),e.equals(t.state.notes)||t.setState({notes:e})},function(e){alert("failed to fetch notes"),console.log(e)})))}},{key:"componentDidUpdate",value:function(){var e=this;null!=r.a.findDOMNode(this)&&setTimeout(function(){window.scrollTo(0,e.scrollPosition)},1);""!==this.state.notesAnimation&&setTimeout(function(){return e.setState({notesAnimation:""})},550)}},{key:"deleteNote",value:function(e){var t=this,a=this.showMessageBox.bind(this);this.props.notesService.deleteNote(e,this.state.loggedInUser).then(function(e){a("success","Deleted note"),t.fetchNotes().then(function(e){return t.setState({notes:e})}),t.closeModal()},function(e){a("error","Failed to delete note")})}},{key:"openModal",value:function(e){var t=this.state.modalData;t.isOpen=!0,t.idToDelete=e,t.animateClass="show",this.setState({modalData:t})}},{key:"closeModal",value:function(){var e=this.state.modalData;e.isOpen=!1,e.animateClass="hide",this.setState({modalData:e})}},{key:"handlePageChange",value:function(e,t){this.setState({currentNotesPage:e,notesAnimation:t})}},{key:"fetchNotes",value:function(e){return e?this.props.notesService.getNotesForUserById(e.id,b(this.props.activeDate),e.authToken):this.props.notesService.getNotesForUserById(this.state.loggedInUser.id,b(this.props.activeDate),this.state.loggedInUser.authToken)}},{key:"renderNotes",value:function(){var e=this;if(!this.state.isLoggedIn)return"Login to add some notes";if(null!==this.state.notes){if(0===this.state.notes.length)return"No notes for this day yet";var t=[];t.push(s.a.createElement(x,{key:"pag-notes",items:this.state.notes,onChangePage:this.handlePageChange,pageSize:5}));var a=[s.a.createElement("div",{key:"note-anim-div",className:"note-anim "+this.state.notesAnimation},this.state.currentNotesPage.map(function(t){return s.a.createElement("li",{key:t._id},t.noteContent,s.a.createElement("span",{key:"dada",className:"delete-note-btn",onClick:function(){return e.openModal(t._id)}},s.a.createElement("span",{key:"nene",className:"tooltip"},"Delete this note"),s.a.createElement("a",{href:"#"},"X")))}))];return t.push(a),t}return s.a.createElement(O,null)}},{key:"render",value:function(){var e=this;return s.a.createElement("ul",{className:"notes-list"},this.renderNotes(),s.a.createElement(B,{isOpen:this.state.modalData.isOpen,closeFunction:function(){return e.closeModal()}},s.a.createElement("div",{className:"delete-confirmation-modal"},s.a.createElement("div",{className:"delete-confirmation-modal-header"},s.a.createElement("p",null,"Are you sure?"),s.a.createElement("span",null,s.a.createElement("a",{href:"#",onClick:function(){return e.closeModal()}},"\xd7"))),s.a.createElement("div",{className:"delete-confirmation-modal-message"},"This will delete the note"),s.a.createElement("div",{className:"delete-confirmation-modal-footer"},s.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.deleteNote(e.state.modalData.idToDelete)}},"Yes"),s.a.createElement("button",{className:"btn btn alert-primary",onClick:function(){return e.closeModal()}},"No")))))}}]),t}(s.a.Component),T=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getCurrentMonth",value:function(){return this.props.activeDate.getMonth()}},{key:"render",value:function(){return s.a.createElement("div",{className:this.props.currentClass},s.a.createElement("h3",null,f.MONTHS_MAP[this.getCurrentMonth()].toString().substr(0,3)),s.a.createElement("p",{className:"day-paragraph"},this.props.activeDate.getDate()))}}]),t}(s.a.Component),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={animateClass:"",oldDate:new Date,isLoading:!1,display:{isFlipped:!1}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillUpdate",value:function(e){var t=this;if(e.activeDate!==this.props.activeDate){this.setState({animateClass:"calendar-block-animate"});setTimeout(function(){t.setState({animateClass:""}),t.setState({oldDate:e.activeDate})},950)}}},{key:"switchView",value:function(){var e=this.state.display;e.isFlipped=!e.isFlipped,this.setState({display:e})}},{key:"saveDayToMyDays",value:function(){var e=this;this.setState({isLoading:!0}),this.props.authenticationService.getCurrentUser().then(function(t){e.props.myDaysService.getMyDayByUser(e.props.activeDate,t).then(function(a){0===a.length?e.props.myDaysService.addDayToMyDays(e.props.activeDate,t).then(function(){e.props.openMessageBox("success","Added day to 'my days'"),e.setState({isLoading:!1})},function(e){alert("DEVELOPER BUG: something went wrong with adding day to my days")}):(e.props.openMessageBox("error","This day is already in 'my days'"),e.setState({isLoading:!1}))},function(e){alert("DEVELOPER BUG: something went wrong with fetching day")})},function(t){e.props.openMessageBox("error","Please log in")})}},{key:"render",value:function(){var e=this,t=this.state.isLoading?s.a.createElement(O,null):"";return s.a.createElement("div",{className:"status-container"},s.a.createElement("div",{className:"block-container"},s.a.createElement(T,{currentClass:"calendar-block old-calendar-block",activeDate:this.props.activeDate}),s.a.createElement(T,{currentClass:"calendar-block "+this.state.animateClass,activeDate:this.state.oldDate})),s.a.createElement("div",{className:"notes-container"},t,s.a.createElement("button",{className:"switch-view ".concat(this.props.isLoggedIn?" enabled":" disabled"),onClick:function(){return e.switchView()}},this.state.display.isFlipped?"Go back to notes":"Add notes for this day"),s.a.createElement("div",{className:"view-note-container\n                        ".concat(this.state.display.isFlipped?"flipped":"")},s.a.createElement("div",{className:"notes-view"},s.a.createElement(A,{openMessageBox:this.props.openMessageBox,isLoggedIn:this.props.isLoggedIn,authenticationService:this.props.authenticationService,notesService:this.props.notesService,activeDate:this.props.activeDate,isThisViewActive:!this.state.display.isFlipped})),s.a.createElement("div",{className:"save-note back"},s.a.createElement(M,{openMessageBox:this.props.openMessageBox,authenticationService:this.props.authenticationService,notesService:this.props.notesService,activeDate:this.props.activeDate}),s.a.createElement("button",{onClick:function(){return e.saveDayToMyDays()},className:"btn btn-primary"},"Save day to my days")))))}}]),t}(s.a.Component),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={activeDate:new Date,daysInCurrentMonth:{},year:(new Date).getFullYear(),month:(new Date).getMonth(),animation:{moveYear:"",moveMonth:""}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({daysInCurrentMonth:this.createCurrentMonthObject()})}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.animation;""!==t.moveYear&&setTimeout(function(){t.moveYear="",e.setState({animation:t})},1e3),""!==t.moveMonth&&setTimeout(function(){t.moveMonth="",e.setState({animation:t})},1e3)}},{key:"updateYear",value:function(e){var t=this.state.animation;t.moveYear=e<0?"year-left":"year-right",this.setState({year:this.state.year+e,currentMonth:this.createCurrentMonthObject(),animation:t})}},{key:"updateMonth",value:function(e){var t=this.state.animation;t.moveMonth=e<0?"month-left":"month-right";var a,n=this.state.year;0===this.state.month&&-1===e?(a=11,n=this.state.year-1):11===this.state.month&&1===e?(a=0,n=this.state.year+1):a=this.state.month+e,this.setState({month:a,year:n})}},{key:"createCurrentMonthObject",value:function(){for(var e=[],t=6-new Date(this.state.year,this.state.month,this.getDaysInMonth()-1).getDay(),a=this.getDaysInMonth(this.state.month-1),n=a-this.getFirstDayOfMonth()+1;n<=a;n++)e.push({dayValue:n,dayClass:"last-month"});for(var s=1;s<=this.getDaysInMonth();s++){var i=new Date,r=new Date(this.state.year,this.state.month,s),o="current-month";s===i.getDate()&&this.state.month===i.getMonth()&&this.state.year===i.getFullYear()&&(o+=" today"),E(this.state.activeDate,r)&&(o+=" active"),e.push({dayValue:s,dayClass:o})}for(var c=1;c<=t;c++)e.push({dayValue:c,dayClass:"next-month"});return e}},{key:"getDaysInMonth",value:function(e){return null!=e?(-1===e&&(e=11),new Date(this.state.year,e+1,0).getDate()):new Date(this.state.year,this.state.month+1,0).getDate()}},{key:"getFirstDayOfMonth",value:function(){return new Date(this.state.year,this.state.month,0).getDay()}},{key:"handleDayBlockClicked",value:function(e){if(e.props.id.startsWith("d-")&&e.props.className.includes("current-month")){var t=new Date(this.state.year,this.state.month,e.props.value);this.setState({activeDate:t})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendar-container"},s.a.createElement("div",{className:"body-container"},s.a.createElement("div",{className:"calendar-header"},s.a.createElement("div",{className:"year"},s.a.createElement("button",{onClick:function(){return e.updateYear(-1)}}),s.a.createElement("p",{className:this.state.animation.moveYear},this.state.year),s.a.createElement("button",{onClick:function(){return e.updateYear(1)}})),s.a.createElement("div",{className:"month"},s.a.createElement("button",{onClick:function(){return e.updateMonth(-1)}}),s.a.createElement("p",{className:this.state.animation.moveMonth},f.MONTHS_MAP[this.state.month]),s.a.createElement("button",{onClick:function(){return e.updateMonth(1)}}))),s.a.createElement(y,{clickHandler:this.handleDayBlockClicked.bind(this),currentMonth:this.createCurrentMonthObject()})),s.a.createElement(_,{openMessageBox:this.props.openMessageBox,isLoggedIn:this.props.isLoggedIn,activeDate:this.state.activeDate,notesService:this.props.notesService,authenticationService:this.props.authenticationService,myDaysService:this.props.myDaysService}))}}]),t}(s.a.Component),F=(a(61),a(82)),H=(a(63),a(65),function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getDate",value:function(){return k(this.props.date)}},{key:"getMonth",value:function(){return f.MONTHS_MAP[this.getDate().getMonth()].toString().substr(0,3)}},{key:"getDayOfWeek",value:function(){return f.DAYS_MAP[this.getDate().getDay()]}},{key:"render",value:function(){return s.a.createElement("div",{className:"calendar-header"},s.a.createElement("div",{className:"calendar-day-year-month-container"},s.a.createElement("span",{className:"calendar-day-month"},this.getMonth()),s.a.createElement("span",{className:"calendar-day-year"},this.getDate().getFullYear())),s.a.createElement("div",{className:"calendar-day-number"},this.getDate().getDate()),s.a.createElement("div",{className:"calendar-day-day-of-week"},this.getDayOfWeek()))}}]),t}(s.a.Component)),Y=(a(67),function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"calendar-day-body "})}}]),t}(s.a.Component)),R=function(e){function t(e){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"stretchDay",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{onClick:function(){return e.stretchDay()},className:"calendar-day"},s.a.createElement(H,{date:this.props.date}),s.a.createElement(Y,null))}}]),t}(s.a.Component),W=(a(69),a(71),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={totalPages:null,currentPage:null},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillUpdate",value:function(e,t){if(null===this.state.totalPages&&e.totalItems&&e.itemsPerPage){var a=Math.ceil(this.props.totalItems/this.props.itemsPerPage);this.setState({totalPages:a,currentPage:this.props.currentPage})}}},{key:"renderPageLinks",value:function(){var e=this;if(!(this.state.totalPages<=1)){var t=[];t.push(s.a.createElement("li",{className:1===this.state.currentPage?"disabled":"",key:"prev-page"},s.a.createElement("a",{onClick:function(){return e.prevPage()},href:"#"},"Previous")));for(var a=function(a){var n=e.state.currentPage===a?"active":"";t.push(s.a.createElement("li",{key:"page-link"+a},s.a.createElement("a",{className:n,onClick:function(){return e.handleLinkClick(a)},href:"#"},a)))},n=1;n<=this.state.totalPages;n++)a(n);return t.push(s.a.createElement("li",{className:this.state.currentPage===this.state.totalPages?"disabled":"",key:"next-page"},s.a.createElement("a",{onClick:function(){return e.nextPage()},href:"#"},"Next"))),t}}},{key:"handleLinkClick",value:function(e){this.setState({currentPage:e}),this.props.handlePageChange(e)}},{key:"prevPage",value:function(){return this.handleLinkClick(this.state.currentPage-1)}},{key:"nextPage",value:function(){return this.handleLinkClick(this.state.currentPage+1)}},{key:"render",value:function(){return s.a.createElement("div",{className:"my-days-pagination"},s.a.createElement("ul",{className:"page-bar"},this.renderPageLinks()))}}]),t}(s.a.Component)),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:{},totalItems:0,pageSize:3,currentPage:1,currentPageItems:[],isLoading:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.isLoggedIn&&this.props.authenticationService.getCurrentUser().then(function(t){e.setState({currentUser:t})})}},{key:"componentWillUpdate",value:function(e,t){var a=this;e.isLoggedIn&&t.currentUser.id&&t.currentPage!==this.state.currentPage&&(this.setState({isLoading:!0}),this.props.myDaysService.getDaysPaged(this.state.pageSize,t.currentPage,t.currentUser).then(function(e){a.setState({currentPageItems:e,isLoading:!1})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.props.isLoggedIn&&!S(t.currentUser,this.state.currentUser)&&(this.setState({isLoading:!0}),this.props.myDaysService.getDaysCount(this.state.currentUser).then(function(e){a.props.myDaysService.getDaysPaged(a.state.pageSize,a.state.currentPage,a.state.currentUser).then(function(e){a.setState({currentPageItems:e,isLoading:!1})}),a.setState({totalItems:e.count})}))}},{key:"handlePageChange",value:function(e){this.setState({currentPage:e})}},{key:"renderDays",value:function(){var e=[];return this.state.currentPageItems.map(function(t){e.push(s.a.createElement(R,{key:t._id,date:t.date}))}),e}},{key:"render",value:function(){var e=this.state.isLoading?s.a.createElement(O,null):"";return s.a.createElement("div",null,s.a.createElement("div",{className:"top-div"},s.a.createElement(W,{totalItems:this.state.totalItems,itemsPerPage:this.state.pageSize,currentPage:this.state.currentPage,handlePageChange:this.handlePageChange.bind(this)})),s.a.createElement("div",{className:"my-days-container"},e,this.renderDays()))}}]),t}(s.a.Component);N.b.add(I.c,I.e,I.d,I.f);var K=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.bindCustomArrayEqualsMethod()}},{key:"bindCustomArrayEqualsMethod",value:function(){Array.prototype.equals=function(e){if(!e)return!1;if(this.length!==e.length)return!1;for(var t=0,a=this.length;t<a;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]===e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendar-app-container"},s.a.createElement(p,null),s.a.createElement(F.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(V,{openMessageBox:e.props.openMessageBox,isLoggedIn:e.props.isLoggedIn,authenticationService:e.props.authenticationService,notesService:e.props.notesService,myDaysService:e.props.myDaysService})}}),s.a.createElement(F.a,{path:"/my_notes",render:function(t){return s.a.createElement(A,{openMessageBox:e.props.openMessageBox,isLoggedIn:e.props.isLoggedIn,authenticationService:e.props.authenticationService,notesService:e.props.notesService,activeDate:new Date})}}),s.a.createElement(F.a,{path:"/my_days",render:function(t){return s.a.createElement(z,{isLoggedIn:e.props.isLoggedIn,authenticationService:e.props.authenticationService,myDaysService:e.props.myDaysService})}}))}}]),t}(n.Component),q=(a(74),a(23)),G=(a(77),function(e,t,a){e.classList.add(t),setTimeout(function(){e.classList.remove("shake-animate")},a)}),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={registerUsername:"",registerEmail:"",registerPassword:"",registerConfirmPassword:"",isUsernameValid:!1,isEmailValid:!1,isPasswordValid:!1,isConfirmPasswordValid:!1,warningDivClass:"text-warning",checkingUser:!1,registerLoading:!1,usernameExists:!0,showUsernameTooltip:!1},a.handleInputChange=a.handleInputChange.bind(Object(d.a)(Object(d.a)(a))),a.registerUser=a.registerUser.bind(Object(d.a)(Object(d.a)(a))),a.checkIfUsernameExists=a.checkIfUsernameExists.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({warningDivClass:"text-warning"})}},{key:"closeForm",value:function(){this.setState({warningDivClass:"text-warning"}),this.props.closeModal()}},{key:"checkIfUsernameExists",value:function(){var e=this;this.isUsernameValid(this.state.registerUsername)&&(this.setState({checkingUser:!0}),this.props.registrationService.isUsernameAlreadyTaken(this.state.registerUsername).then(function(t){t.usernameExists?e.setState({usernameExists:!0,showUsernameTooltip:!0}):e.setState({usernameExists:!1,showUsernameTooltip:!1}),e.setState({checkingUser:!1})}))}},{key:"areInputsValid",value:function(){return this.state.isUsernameValid&&this.state.isEmailValid&&this.state.isPasswordValid&&this.state.isConfirmPasswordValid}},{key:"registerUser",value:function(e){var t=this;if(this.areInputsValid()&&!this.state.usernameExists){var a={username:this.state.registerUsername,password:this.state.registerPassword,email:this.state.registerEmail};this.setState({registerLoading:!0});var n=this.props.closeModal;this.props.registrationService.registerUser(a).then(function(e){t.setState({registerLoading:!1}),t.props.openMessageBox("success","Registered successfully"),n()},function(e){t.props.openMessageBox("error","Failed to register")})}else{var s=e.target.parentNode.parentNode.parentNode;G(s,"shake-animate",700),this.setState({warningDivClass:"text-danger"})}}},{key:"handleInputChange",value:function(e){var t,a=e.target.value,n=e.target.name;switch(n.toLowerCase().includes("password")&&(a=btoa(a)),this.setState(Object(q.a)({},"register"+n,a)),n){case"Username":t=this.isUsernameValid(a),this.setState({isUsernameValid:t});break;case"Email":t=this.isEmailValid(a),this.setState({isEmailValid:t});break;case"Password":t=this.isPasswordValid(a),this.setState({isPasswordValid:t});break;case"ConfirmPassword":t=this.isConfirmPasswordValid(a),this.setState({isConfirmPasswordValid:t})}}},{key:"isUsernameValid",value:function(e){return e.length>=3&&e.length<=16}},{key:"isPasswordValid",value:function(e){return atob(e).length>=3}},{key:"isEmailValid",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"isConfirmPasswordValid",value:function(e){return atob(this.state.registerPassword)===atob(e)}},{key:"render",value:function(){var e=this,t=this.state.checkingUser?s.a.createElement(O,null):"",a=this.state.registerLoading?s.a.createElement(O,null):"";return s.a.createElement("form",{method:"GET",className:"user-form user-register-form"},a,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-username"},"Username:"),s.a.createElement("div",{className:"".concat(this.state.warningDivClass," ").concat(this.state.isUsernameValid?"hide":" ")},"Username can be between 3 and 16 letters long"),s.a.createElement("div",{className:"position-relative"},s.a.createElement("input",{name:"Username",className:"form-control",id:"register-username",type:"text",placeholder:"Username",onChange:this.handleInputChange,onBlur:this.checkIfUsernameExists}),s.a.createElement("span",{className:this.state.usernameExists?"hide":"show"},s.a.createElement(D.a,{icon:"check-circle"})),s.a.createElement("span",{className:this.state.usernameExists?"show":"hide"},s.a.createElement("span",{id:"username-taken-tooltip",className:this.state.showUsernameTooltip?"show":"hide"},"username taken"),s.a.createElement(D.a,{icon:"times-circle"})),t)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-password"},"Email:"),s.a.createElement("div",{className:"".concat(this.state.warningDivClass," ").concat(this.state.isEmailValid?"hide":" ")},'Email should be "example@mailService.domain"'),s.a.createElement("div",{className:"position-relative"},s.a.createElement("input",{name:"Email",className:"form-control",id:"register-email",type:"email",placeholder:"Email",onChange:this.handleInputChange}),s.a.createElement("span",{className:this.state.isEmailValid?"show":"hide"},s.a.createElement(D.a,{icon:"check-circle"})),s.a.createElement("span",{className:this.state.isEmailValid?"hide":"show"},s.a.createElement(D.a,{icon:"times-circle"})))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-password"},"Password:"),s.a.createElement("div",{className:"".concat(this.state.warningDivClass," ").concat(this.state.isPasswordValid?"hide":" ")},"Password must be atleast 3 symbols"),s.a.createElement("div",{className:"position-relative"},s.a.createElement("input",{name:"Password",className:"form-control",id:"register-password",type:"password",placeholder:"password",onChange:this.handleInputChange}),s.a.createElement("span",{className:this.state.isPasswordValid?"show":"hide"},s.a.createElement(D.a,{icon:"check-circle"})),s.a.createElement("span",{className:this.state.isPasswordValid?"hide":"show"},s.a.createElement(D.a,{icon:"times-circle"})))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-password"},"Confirm Password:"),s.a.createElement("div",{className:"".concat(this.state.warningDivClass," ").concat(this.state.isConfirmPasswordValid?"hide":" ")},"Passwords don't match"),s.a.createElement("div",{className:"position-relative"},s.a.createElement("input",{name:"ConfirmPassword",className:"form-control",id:"register-confirm-password",type:"password",placeholder:"confirm password",onChange:this.handleInputChange}),s.a.createElement("span",{className:this.state.isConfirmPasswordValid?"show":"hide"},s.a.createElement(D.a,{icon:"check-circle"})),s.a.createElement("span",{className:this.state.isConfirmPasswordValid?"hide":"show"},s.a.createElement(D.a,{icon:"times-circle"})))),s.a.createElement("div",{className:"form-group pl-1"},s.a.createElement("button",{type:"button",onClick:this.registerUser,className:"btn btn-primary"},"Register"),s.a.createElement("button",{type:"button",onClick:function(){return e.closeForm()},className:"btn btn-primary"},"Cancel")))}}]),t}(s.a.Component),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={startLoading:!1,loginUsername:"",loginPassword:""},a.handleUsernameChange=a.handleUsernameChange.bind(Object(d.a)(Object(d.a)(a))),a.handlePasswordChange=a.handlePasswordChange.bind(Object(d.a)(Object(d.a)(a))),a.loginUser=a.loginUser.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"stopLoading",value:function(){this.setState({startLoading:!1})}},{key:"loginUser",value:function(e){var t=this,a=e.target.parentNode.parentNode.parentNode,n={username:this.state.loginUsername,password:this.state.loginPassword},s=this.props.closeModal,i=this.stopLoading.bind(this),r=this.props.loginHandler;this.setState({startLoading:!0}),this.props.authenticationService.loginUser(n).then(function(e){i(),s(),r(),t.props.openMessageBox("success","Logged in")},function(e){i(),t.props.openMessageBox("error","Wrong account or password"),G(a,"shake-animate",700)})}},{key:"handleUsernameChange",value:function(e){var t=e.target.value;this.setState({loginUsername:t})}},{key:"handlePasswordChange",value:function(e){var t=btoa(e.target.value);this.setState({loginPassword:t})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"user-form user-login-form"},this.state.startLoading?s.a.createElement(O,null):"",s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"login-username"},"Username:"),s.a.createElement("input",{className:"form-control",id:"login-username",type:"text",placeholder:"username",onChange:this.handleUsernameChange})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"login-password"},"Password:"),s.a.createElement("input",{className:"form-control",id:"login-password",type:"password",placeholder:"password",onChange:this.handlePasswordChange})),s.a.createElement("div",{className:"form-group pl-1"},s.a.createElement("button",{type:"button",onClick:this.loginUser,className:"btn btn-primary"},"Login"),s.a.createElement("button",{type:"button",onClick:function(){return e.props.closeModal()},className:"btn btn-primary"},"Cancel")))}}]),t}(s.a.Component),Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isLoggedIn:!1,isLoginModalOpen:!1,isRegisterModalOpen:!1,mouseOver:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({isLoggedIn:this.props.isLoggedIn})}},{key:"componentWillUpdate",value:function(e){this.state.isLoggedIn!==e.isLoggedIn&&this.setState({isLoggedIn:e.isLoggedIn})}},{key:"closeModal",value:function(e){switch(e.toLowerCase()){case"login":this.state.isLoginModalOpen&&this.setState({isLoginModalOpen:!1});break;case"register":this.state.isRegisterModalOpen&&this.setState({isRegisterModalOpen:!1})}}},{key:"openModal",value:function(e){switch(e.toLowerCase()){case"login":this.state.isLoginModalOpen||this.setState({isLoginModalOpen:!0});break;case"register":this.state.isRegisterModalOpen||this.setState({isRegisterModalOpen:!0})}}},{key:"logout",value:function(){var e=this,t=this.changeLogoutState.bind(this),a=this.props.userChangeHandler;this.props.authenticationService.logout().then(function(){e.props.openMessageBox("success","Logged out"),t(),a()})}},{key:"changeLogoutState",value:function(){this.setState({isLoggedIn:!1})}},{key:"handleMouseOver",value:function(){this.setState({mouseOver:!0})}},{key:"handleMouseLeave",value:function(){this.setState({mouseOver:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{onMouseEnter:function(){return e.handleMouseOver()},onMouseLeave:function(){return e.handleMouseLeave()},className:"user-navigation-container ".concat(this.state.mouseOver?"show":"hide")},s.a.createElement("ul",{className:"user-nav"},s.a.createElement("li",{className:"user-nav-link ".concat(this.state.isLoggedIn?"hidden":"")},s.a.createElement("a",{href:"#",onClick:function(){return e.openModal("login")}},"Login")),s.a.createElement("li",{className:"user-nav-link ".concat(this.state.isLoggedIn?"hidden":"")},s.a.createElement("a",{onClick:function(){return e.openModal("register")},href:"#"},"Register")),s.a.createElement("li",{className:"user-nav-link ".concat(this.state.isLoggedIn?"":"hidden")},s.a.createElement("a",{onClick:function(){return e.logout()},href:"#"},"Logout"))),s.a.createElement(B,{customStyle:{marginTop:0,width:"40%"},isOpen:this.state.isRegisterModalOpen,closeFunction:function(){return e.closeModal("register")}},s.a.createElement(J,{openMessageBox:this.props.openMessageBox,closeModal:function(){return e.closeModal("register")},registrationService:this.props.registrationService})),s.a.createElement(B,{customStyle:{marginTop:"5%"},isOpen:this.state.isLoginModalOpen,closeFunction:function(){return e.closeModal("Login")}},s.a.createElement(Q,{openMessageBox:this.props.openMessageBox,loginHandler:this.props.userChangeHandler,closeModal:function(){return e.closeModal("login")},authenticationService:this.props.authenticationService})))}}]),t}(n.Component),$=a(10),X=a.n($),ee=a(7),te=a.n(ee),ae=function(e){return X.a.ajax({method:"POST",url:te.a.API_BASE_URL+"user/"+te.a.API_KEY+"/login",headers:te.a.BASIC_AUTH_HEADER,data:e})},ne=function(e){return X.a.ajax({method:"POST",url:te.a.API_BASE_URL+"user/"+te.a.API_KEY,headers:te.a.BASIC_AUTH_HEADER,data:e})},se=function(e){return X.a.ajax({method:"POST",url:te.a.API_BASE_URL+"user/"+te.a.API_KEY+"/_logout",headers:e})},ie=function(e){return X.a.ajax({method:"POST",url:"".concat(te.a.API_BASE_URL,"rpc/").concat(te.a.API_KEY,"/check-username-exists"),headers:te.a.BASIC_AUTH_HEADER,data:e})},re=function(e){var t={Authorization:"Kinvey "+e};return X.a.ajax({method:"GET",url:te.a.API_BASE_URL+"user/"+te.a.API_KEY+"/_me",headers:t})},oe=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"loginUser",value:function(e){var t=this.setToken;return new Promise(function(a,n){ae(e).then(function(e){var n=e._kmd.authtoken;t(n),a(n)},function(e){n(e)})})}},{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"logout",value:function(){var e=this;return new Promise(function(t,a){var n={Authorization:"Kinvey "+e.getToken()};se(n).then(function(e){localStorage.removeItem("user_token"),t(e)},function(e){a(e)})})}},{key:"setToken",value:function(e){localStorage.setItem("user_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("user_token")}},{key:"getCurrentUser",value:function(){var e=this;if(this.isLoggedIn())return new Promise(function(t,a){re(e.getToken()).then(function(a){var n={};n.id=a._id,n.authToken=a._kmd.authtoken,n.authToken=e.getToken(),t(n)},function(e){console.error(e),a(e)})})}}]),e}(),ce=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"isUsernameAlreadyTaken",value:function(e){var t={username:e};return new Promise(function(e,a){ie(t).then(function(t){e(t)},function(e){a(e)})})}},{key:"registerUser",value:function(e){return new Promise(function(t,a){ne(e).then(function(e){t(e)},function(e){a(e)})})}}]),e}(),le=function(e,t,a){var n=a||"";return X.a.ajax({method:"GET",url:te.a.API_BASE_URL+"appdata/"+te.a.API_KEY+"/"+e+"/"+n,headers:t})},ue=function(e,t,a){return X.a.ajax({method:"POST",url:te.a.API_BASE_URL+"appdata/"+te.a.API_KEY+"/"+e,headers:t,data:a})},he=function(e,t,a){return X.a.ajax({method:"DELETE",url:te.a.API_BASE_URL+"appdata/"+te.a.API_KEY+"/"+e+"/"+t,headers:a})},de=function(e,t,a){var n=a||"";return X.a.ajax({method:"GET",url:te.a.API_BASE_URL+"appdata/"+te.a.API_KEY+"/"+e+"/_count/"+n,headers:t})},me=function(e,t,a){var n='?query={"dayId":"'.concat(t,'", "_acl.creator":"').concat(e,'"}');return le("notes",a,n)},ge=function(e,t){return ue("notes",t,e)},pe=function(e,t){return he("notes",e,t)},ve=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"generateHeaders",value:function(e){return{Authorization:"Kinvey "+e}}},{key:"addNote",value:function(e,t){var a=this.generateHeaders(t.authToken);return new Promise(function(t,n){ge(e,a).then(function(e){e.dayId,e._id;t()},function(e){n(e),console.log(e)})})}},{key:"getNotesForUserById",value:function(e,t,a){var n=this.generateHeaders(a);return new Promise(function(a,s){me(e,t,n).then(function(e){a(e)},function(e){s(e)})})}},{key:"deleteNote",value:function(e,t){var a=this.generateHeaders(t.authToken);return new Promise(function(t,n){pe(e,a).then(function(e){t(e)},function(e){n(e)})})}}]),e}(),fe=function(e,t){return ue("my-days",t,e)},ye=function(e,t){return new Promise(function(a,n){le("my-days",e,t).then(function(e){a(e)},function(e){n(e)})})},be=function(e,t){return new Promise(function(a,n){le("my-days",e,t).then(function(e){return a(e)},function(e){return n(e)})})},ke=function(e,t){return new Promise(function(a,n){de("my-days",e,t).then(function(e){return a(e)},function(e){return n(e)})})},Ee=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"generateHeaders",value:function(e){return{Authorization:"Kinvey "+e}}},{key:"addDayToMyDays",value:function(e,t){var a={date:b(e)},n=this.generateHeaders(t.authToken);return new Promise(function(e,t){fe(a,n).then(function(t){e(t)},function(e){t(e)})})}},{key:"getMyDayByUser",value:function(e,t){var a=b(e),n='?query={"date":"'.concat(a,'", "_acl.creator" : "').concat(t.id,'"}'),s=this.generateHeaders(t.authToken);return ye(s,n)}},{key:"getDaysPaged",value:function(e,t,a){var n='?query={"_acl.creator" : "'.concat(a.id,'"}&limit=').concat(e,"&skip=").concat(e*(t-1)),s=this.generateHeaders(a.authToken);return be(s,n)}},{key:"getDaysCount",value:function(e){var t=this.generateHeaders(e.authToken),a='?query={"_acl.creator":"'.concat(e.id,'"}');return ke(t,a)}}]),e}(),Se=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n=new oe,s=new ce,i=new ve,r=new Ee;return a.state={isLoggedIn:!1,authenticationService:n,registrationService:s,notesService:i,myDaysService:r,messageBox:{type:"",closeFunction:"",message:""}},a.openMessageBox=a.openMessageBox.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({isLoggedIn:this.state.authenticationService.isLoggedIn()})}},{key:"userChangeHandler",value:function(e){this.setState({isLoggedIn:this.state.authenticationService.isLoggedIn()})}},{key:"openMessageBox",value:function(e,t){var a={type:e,message:t};this.setState({messageBox:a})}},{key:"resetMessageBox",value:function(){this.setState({messageBox:{}})}},{key:"render",value:function(){var e,t=this;return this.state.messageBox.type&&this.state.messageBox.message&&(e=s.a.createElement(w,{closeFunction:function(){return t.resetMessageBox()},type:this.state.messageBox.type,message:this.state.messageBox.message})),s.a.createElement("div",{className:"app-container"},e,s.a.createElement(Z,{openMessageBox:this.openMessageBox,isLoggedIn:this.state.isLoggedIn,userChangeHandler:function(){return t.userChangeHandler()},authenticationService:this.state.authenticationService,registrationService:this.state.registrationService}),s.a.createElement(m.a,null,s.a.createElement(K,{openMessageBox:this.openMessageBox,isLoggedIn:this.state.isLoggedIn,authenticationService:this.state.authenticationService,notesService:this.state.notesService,myDaysService:this.state.myDaysService})))}}]),t}(n.Component);r.a.render(s.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[25,2,1]]]);
//# sourceMappingURL=main.0b52ca4f.chunk.js.map