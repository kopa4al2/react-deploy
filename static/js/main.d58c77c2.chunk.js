(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t){var a={Authorization:"Basic "+btoa("kid_r1ynbbg6Q:33903aebaffd4a3b944250b832bd81f3")};btoa("kid_r1ynbbg6Q:f55dd3810f61465c98c4fec7525a6ba9");e.exports={API_BASE_URL:"https://baas.kinvey.com/",API_KEY:"kid_r1ynbbg6Q",BASIC_AUTH_HEADER:a}},,,,,,,function(e,t){e.exports={MONTHS_MAP:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},DAYS_MAP:{0:"MONDAY",1:"TUESDAY",2:"WEDNESDAY",3:"THURSDAY",4:"FRIDAY",5:"SATURDAY",6:"SUNDAY"}}},,,,function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},,,,function(e,t,a){e.exports=a(105)},,,,,,,function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},,,,,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);a(31);var n=a(0),s=a.n(n),r=a(14),i=a.n(r);a(37),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,c=a(2),l=a(3),u=a(5),h=a(4),d=a(6),m=a(8),g=a(108),p=a(22),f=(a(39),a(107)),v=s.a.createContext(""),y=a(106),k=function(e){return function(t){return s.a.createElement(v.Consumer,null,function(a){return null===a.isLoggedIn?"":s.a.createElement(e,Object.assign({context:a},t))})}},b=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={activeLinks:{home:"/"===a.props.route.location.pathname||"/calendar"===a.props.route.location.pathname,myNotes:"/my_notes"===a.props.route.location.pathname,myDays:"/my_days"===a.props.route.location.pathname}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e){for(var t={},a=Object.entries(this.state.activeLinks),n=0;n<a.length;n++){var s=a[n],r=Object(p.a)(s,1)[0];t[r]=r.toLowerCase().includes(e.target.name.toLowerCase())}this.setState({activeLinks:t})}},{key:"render",value:function(){return s.a.createElement("nav",{className:"navigation-bar"},s.a.createElement("div",{className:"logo-container"},s.a.createElement("h2",null,"Calendar")),s.a.createElement("div",{className:"url-container"},s.a.createElement("ul",null,s.a.createElement("li",{className:this.state.activeLinks.home?"active":""},s.a.createElement(f.a,{onClick:this.handleClick.bind(this),to:"/calendar",name:"home"},"Home")),s.a.createElement("li",{className:this.state.activeLinks.myNotes?"active":""},s.a.createElement(f.a,{onClick:this.handleClick.bind(this),to:"/my_notes",name:"myNotes"},"My notes")),s.a.createElement("li",{className:this.state.activeLinks.myDays?"active":""},s.a.createElement(f.a,{onClick:this.handleClick.bind(this),to:"/my_days",name:"myDays"},"My Days")))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{activeLinks:{home:"/"===e.route.location.pathname||"/calendar"===e.route.location.pathname,myNotes:"/my_notes"===e.route.location.pathname,myDays:"/my_days"===e.route.location.pathname}}}}]),t}(s.a.Component),E=(o=b,function(e){return s.a.createElement(y.a,null,function(t){return s.a.createElement(o,Object.assign({route:t},e))})}),D=(a(44),a(25),a(20),function(e){return s.a.createElement("div",{className:"day-block ".concat(e.className),onClick:function(){return e.clickHandler(e)}},e.value)}),I=a(16),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentMonth:a.props.currentMonth},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.currentMonth!==e.currentMonth&&this.setState({currentMonth:e.currentMonth})}},{key:"renderBlock",value:function(e,t,a){return s.a.createElement(D,{key:a,id:a,value:e,className:t,clickHandler:this.props.clickHandler})}},{key:"renderHeader",value:function(){for(var e=[],t=0;t<7;t++)e.push(this.renderBlock(I.DAYS_MAP[t].substr(0,3),"block-heading","h-".concat(t)));return e}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendar-body"},this.renderHeader(),this.state.currentMonth.map(function(t,a){return e.renderBlock(t.dayValue,t.dayClass,"d-"+a)}))}}]),t}(s.a.Component),C=(a(49),function(e){return s.a.createElement("div",{className:e.currentClass},s.a.createElement("h3",null,I.MONTHS_MAP[e.activeDate.getMonth()].toString().substr(0,3)),s.a.createElement("p",{className:"day-paragraph"},e.activeDate.getDate()))}),w=a(7),P=a.n(w),S=a(10),j={extractIdByDate:function(e){return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},extractDateById:function(e){var t=e.split("-")[0],a=e.split("-")[1],n=e.split("-")[2];return new Date(t,a,n,0,0,0)},compareDates:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},areUsersDtoSame:function(e,t){return!(!e||!t)&&(e.id===t.id&&e.authToken===t.authToken)},elementInViewport:function(e){for(var t=e.offsetTop,a=e.offsetLeft,n=e.offsetWidth,s=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,a+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&a<window.pageXOffset+window.innerWidth&&t+s>window.pageYOffset&&a+n>window.pageXOffset}},x=a(12),N=a.n(x),M=a(9),L=a.n(M),U=function(e){return N.a.ajax({method:"POST",url:L.a.API_BASE_URL+"user/"+L.a.API_KEY+"/login",headers:L.a.BASIC_AUTH_HEADER,data:e})},T=function(e){return N.a.ajax({method:"POST",url:L.a.API_BASE_URL+"user/"+L.a.API_KEY,headers:L.a.BASIC_AUTH_HEADER,data:e})},B=function(e){return N.a.ajax({method:"POST",url:L.a.API_BASE_URL+"user/"+L.a.API_KEY+"/_logout",headers:e})},A=function(e){return N.a.ajax({method:"POST",url:"".concat(L.a.API_BASE_URL,"rpc/").concat(L.a.API_KEY,"/check-username-exists"),headers:L.a.BASIC_AUTH_HEADER,data:e})},_=function(e){var t={Authorization:"Kinvey "+e};return N.a.ajax({method:"GET",url:L.a.API_BASE_URL+"user/"+L.a.API_KEY+"/_me",headers:t})},F=function(e,t,a){var n=a||"";return N.a.ajax({method:"GET",url:L.a.API_BASE_URL+"appdata/"+L.a.API_KEY+"/"+e+"/"+n,headers:t})},V=function(e,t,a){return N.a.ajax({method:"POST",url:L.a.API_BASE_URL+"appdata/"+L.a.API_KEY+"/"+e,headers:t,data:a})},H=function(e,t,a,n){return N.a.ajax({method:"PUT",url:L.a.API_BASE_URL+"appdata/"+L.a.API_KEY+"/"+e+"/"+n,headers:t,data:a})},Y=function(e,t,a){return N.a.ajax({method:"DELETE",url:L.a.API_BASE_URL+"appdata/"+L.a.API_KEY+"/"+e+"/"+t,headers:a})},R=function(e,t,a){var n=a||"";return N.a.ajax({method:"GET",url:L.a.API_BASE_URL+"appdata/"+L.a.API_KEY+"/"+e+"/_count/"+n,headers:t})},W=function(e,t){return V("my-days",t,e)},z=function(e,t){return new Promise(function(a,n){F("my-days",e,t).then(function(e){a(e)},function(e){n(e)})})},q=function(e,t){return new Promise(function(a,n){F("my-days",e,t).then(function(e){return a(e)},function(e){return n(e)})})},K=function(e,t){return new Promise(function(a,n){R("my-days",e,t).then(function(e){return a(e)},function(e){return n(e)})})},G=function(e,t){return new Promise(function(a,n){Y("my-days",e,t).then(function(e){return a(e)},function(e){return n(e)})})},J=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"generateHeaders",value:function(e){return{Authorization:"Kinvey "+e}}}]),e}(),X=function(e,t){return V("todo-list",t,e)},Q=function(e,t,a){return H("todo-list",t,e,a)},Z=function(e,t){return new Promise(function(a,n){F("todo-list",e,t).then(function(e){return a(e)},function(e){return n(e)})})},$=function(e,t){return new Promise(function(a,n){F("todo-list",e,t).then(function(e){return a(e)},function(e){return n(e)})})},ee=function(e,t){return new Promise(function(a,n){R("todo-list",e,t).then(function(e){return a(e)},function(e){return n(e)})})},te=function(e,t){return new Promise(function(a,n){Y("todo-list",e,t).then(function(e){return a(e)},function(e){return n(e)})})},ae=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"addToDoItem",value:function(e,t){var a=J.generateHeaders(t.authToken);return new Promise(function(t,n){X(e,a).then(function(e){t(e)},function(e){n(e)})})}},{key:"finishToDoItem",value:function(){var e=Object(S.a)(P.a.mark(function e(t,a){var n,s;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=J.generateHeaders(a.authToken),e.next=3,$(n,t);case 3:return(s=e.sent).isFinished=!0,e.abrupt("return",new Promise(function(e,a){Q(s,n,t).then(function(t){return e(t)},function(e){return a(e)})}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getToDoListByDayPaged",value:function(e,t,a,n){var s='?query={"_acl.creator" : "'.concat(a.id,'", "dayId" : "').concat(n,'"}\n                            &limit=').concat(e,"&skip=").concat(e*(t-1),'\n                            &sort={"_kmd.lmt": -1 , "isFinished" : 1}'),r=J.generateHeaders(a.authToken);return Z(r,s)}},{key:"getToDoListCount",value:function(e,t){var a=J.generateHeaders(e.authToken),n='?query={"_acl.creator":"'.concat(e.id,'", "dayId" : "').concat(t,'"}');return ee(a,n)}},{key:"removeToDoItem",value:function(e,t){var a=J.generateHeaders(t.authToken);return te(e,a)}}]),e}(),ne=(a(26),a(55),a(57),document.getElementById("root")),se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isShown:!1,animationClass:"hide",transitionEnded:!1,customStyle:{}},a.modal=document.createElement("div"),a.handleBackgroundClick=a.handleBackgroundClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.customStyle&&this.setState({customStyle:this.props.customStyle}),ne.appendChild(this.modal),this.props.isOpen&&(this.setState({isShown:!0}),setTimeout(function(){e.setState({animationClass:"show"})},10))}},{key:"componentWillUnmount",value:function(){ne.contains(this.modal)&&ne.removeChild(this.modal)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.isOpen)this.setState({isShown:!0}),setTimeout(function(){t.setState({animationClass:"show"})},10);else{this.setState({animationClass:"hide"});setTimeout(function(){t.setState({isShown:!1})},300)}}},{key:"handleBackgroundClick",value:function(e){e.target.closest("div").classList.contains("modal-box-background")&&this.props.closeFunction()}},{key:"render",value:function(){return i.a.createPortal(s.a.createElement("div",{onClick:this.handleBackgroundClick,className:"modal-box-background ".concat(this.state.isShown?"shown":"")},s.a.createElement("div",{style:this.state.customStyle,className:"modal-box-content ".concat(this.state.animationClass)},this.props.children)),this.modal)}}]),t}(s.a.Component),re=(document.getElementById("root"),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isOpen:!0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"close",value:function(){this.setState({isOpen:!1}),this.props.closeFunction()}},{key:"render",value:function(){var e=this;return s.a.createElement(se,{isOpen:this.state.isOpen,closeFunction:this.props.closeFunction},s.a.createElement("div",{className:"confirmation-modal"},s.a.createElement("div",{className:"confirmation-modal-header"},s.a.createElement("p",null,"Are you sure?"),s.a.createElement("span",null,s.a.createElement("a",{href:"#",onClick:function(){return e.close()}},"\xd7"))),s.a.createElement("div",{className:"confirmation-modal-message"},this.props.confirmationMessage),s.a.createElement("div",{className:"confirmation-modal-footer"},s.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.confirmFunction()}},"Yes"),s.a.createElement("button",{className:"btn btn alert-primary",onClick:function(){return e.close()}},"No"))))}}]),t}(s.a.Component)),ie=(a(61),function(e){return s.a.createElement("span",{style:e.customStyle?e.customStyle:{},className:"tooltip ".concat(e.position)},e.tooltip)});ie.defaultProps={position:"right"};var oe=ie,ce={marginTop:"-35px"},le=function(e){return s.a.createElement("div",{className:"todo-list-row",id:e.id},s.a.createElement("div",{className:"form-check"},s.a.createElement("input",{onChange:function(t){e.finishItem(e.item._id,t.target.checked)},disabled:"true"===e.item.isFinished,checked:"true"===e.item.isFinished,type:"checkbox"}),s.a.createElement("span",{className:"true"===e.item.isFinished?"checked":"unchecked"},e.item.content)),s.a.createElement("span",{onClick:function(){return e.openConfirmation(e.item._id)},className:"tooltip-activator"},s.a.createElement("a",{href:"#"},"X"),s.a.createElement(oe,{position:"top",tooltip:"Remove",customStyle:ce})))},ue=(a(63),function(e){var t=s.a.createElement("div",{className:"loading-background"},s.a.createElement("div",{className:"loading-wrapper"},s.a.createElement("div",{className:"loading-inner"})));return e.portal?r.createPortal(t,e.portal):t}),he=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={input:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"submit",value:function(e){e.preventDefault(),""!==this.state.input&&(this.props.addTodoItem(this.state.input),this.setState({input:""}))}},{key:"handleInput",value:function(e){this.setState({input:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"todo-list-container"},s.a.createElement("form",{className:"form-inline justify-content-end",onSubmit:this.submit.bind(this)},s.a.createElement("div",{className:"form-group w-100"},s.a.createElement("input",{className:"form-control",onChange:this.handleInput.bind(this),value:this.state.input,name:"content",type:"text"}),s.a.createElement("input",{className:"btn btn-primary",value:"Add to my TODO list",type:"submit"}))))}}]),t}(s.a.Component),de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={items:null,isConfirmDialogOpen:!1,idToDelete:null,isLoading:!1,isLoadingFinish:!1,itemId:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({items:this.props.itemsToDisplay})}},{key:"finishItem",value:function(){var e=Object(S.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoadingFinish:!0,itemId:t}),this.showCongratz(),e.next=4,this.props.finishItem(t);case 4:this.setState({isLoadingFinish:!1,itemId:null});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showCongratz",value:function(){var e=document.createElement("div");e.classList.add("congratz-outer");var t=document.createElement("div");t.classList.add("congratz-inner"),t.innerHTML="GOOD JOB",e.appendChild(t),document.getElementsByTagName("BODY")[0].appendChild(e),setTimeout(function(){document.getElementsByTagName("BODY")[0].removeChild(e)},2e3)}},{key:"openConfirmation",value:function(e){this.setState({isConfirmDialogOpen:!0,idToDelete:e})}},{key:"closeConfirmation",value:function(){this.setState({isConfirmDialogOpen:!1,idToDelete:null})}},{key:"confirmDelete",value:function(){var e=Object(S.a)(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,this.props.removeToDoItem(this.state.idToDelete);case 3:this.setState({isLoading:!1}),this.closeConfirmation();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addTodoItem",value:function(){var e=Object(S.a)(P.a.mark(function e(t){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,this.props.addToDoItem(t);case 3:this.setState({isLoading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.isConfirmDialogOpen?s.a.createElement(re,{isOpen:this.state.isConfirmDialogOpen,closeFunction:function(){return e.closeConfirmation()},confirmFunction:function(){return e.confirmDelete()},confirmationMessage:"Remove TODO item from the list"}):"",a=this.state.isLoading?s.a.createElement(ue,null):this.state.isLoadingFinish?s.a.createElement(ue,{portal:document.getElementById(this.state.itemId).firstChild}):"";return this.props.isLoggedIn?s.a.createElement(s.a.Fragment,null,t,a,s.a.createElement(he,{addTodoItem:this.addTodoItem.bind(this)}),s.a.createElement("div",{className:"todos"},this.renderToDoItems())):s.a.createElement("div",{className:"todos"},s.a.createElement("div",{className:"pl-4"},"Log in to add TODO items"))}},{key:"renderToDoItems",value:function(){var e=this;return null===this.state.items?s.a.createElement(ue,null):this.state.items.length>0?this.state.items.map(function(t){return s.a.createElement(le,{id:t._id,key:t._id,item:t,finishItem:e.finishItem.bind(e),openConfirmation:e.openConfirmation.bind(e)})}):s.a.createElement("div",{className:"pl-4"},"No TODOs for today")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.itemsToDisplay!==t.items?{items:e.itemsToDisplay}:{}}}]),t}(s.a.Component),me=a(1),ge=a.n(me),pe=(a(65),ge.a.number.isRequired,ge.a.number.isRequired,ge.a.number.isRequired,ge.a.func.isRequired,function(e){function t(e){var a;Object(c.a)(this,t);return(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={totalPages:null,currentPage:null,leftMostPage:1,rightMostPage:void 0,maxPages:5},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderPageLinks",value:function(){var e=this;if(this.state.totalPages&&!(this.state.totalPages<=1)){var t=[];t.push(s.a.createElement("li",{className:1===this.state.currentPage?"disabled":"",key:"prev-page"},s.a.createElement("a",{onClick:function(){return e.prevPage()},href:"#"},"Previous")));for(var a=function(a){var n=e.state.currentPage===a?"active":"";t.push(s.a.createElement("li",{key:"page-link"+a},s.a.createElement("a",{className:n,onClick:function(){return e.handleLinkClick(a)},href:"#"},a)))},n=this.state.leftMostPage;n<=this.state.rightMostPage;n++)a(n);return t.push(s.a.createElement("li",{className:this.state.currentPage===this.state.totalPages?"disabled":"",key:"next-page"},s.a.createElement("a",{onClick:function(){return e.nextPage()},href:"#"},"Next"))),t}}},{key:"handleLinkClick",value:function(e){this.setState({currentPage:e}),this.props.handlePageChange(e)}},{key:"prevPage",value:function(){return this.handleLinkClick(this.state.currentPage-1)}},{key:"nextPage",value:function(){return this.handleLinkClick(this.state.currentPage+1)}},{key:"render",value:function(){return s.a.createElement("div",{className:"my-days-pagination"},s.a.createElement("ul",{className:"page-bar"},this.renderPageLinks()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.totalItems!==t.totalItems||e.currentPage!==t.currentPage){var a=Math.ceil(e.totalItems/e.itemsPerPage);if(a>t.maxPages){var n=Math.floor(t.maxPages/2),s=t.maxPages,r=1;return e.currentPage>n&&(r=e.currentPage-n,s=e.currentPage+n>e.totalItems?e.totalItems:e.currentPage+n),{leftMostPage:r,rightMostPage:s,totalPages:a,currentPage:e.currentPage}}return{totalPages:a,currentPage:e.currentPage,rightMostPage:a}}return{}}}]),t}(s.a.Component)),fe=k(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={totalItems:0,pageSize:5,currentPage:1,currentPageItems:null,currentDateId:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.initTodoItems()}},{key:"componentDidUpdate",value:function(e,t){t.currentDateId!==this.state.currentDateId&&this.initTodoItems()}},{key:"initTodoItems",value:function(){var e=Object(S.a)(P.a.mark(function e(){var t,a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.currentDateId){e.next=2;break}return e.abrupt("return");case 2:return this.setState({isLoading:!0}),e.next=5,ae.getToDoListCount(this.props.context.loggedInUser,this.state.currentDateId);case 5:return t=e.sent,e.next=8,this.fetchToDoListPaged();case 8:a=e.sent,this.setState({totalItems:t.count,currentPageItems:a,isLoading:!1});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchToDoListPaged",value:function(){var e=Object(S.a)(P.a.mark(function e(t,a,n,s){var r=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){ae.getToDoListByDayPaged(t||r.state.pageSize,a||r.state.currentPage,n||r.props.context.loggedInUser,s||r.props.currentDateId).then(function(t){return e(t)},function(e){return i(e)})}));case 1:case"end":return e.stop()}},e,this)}));return function(t,a,n,s){return e.apply(this,arguments)}}()},{key:"addToDoItem",value:function(){var e=Object(S.a)(P.a.mark(function e(t){var a,n=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={isFinished:!1,dayId:this.props.currentDateId,content:t},e.abrupt("return",new Promise(function(e,t){ae.addToDoItem(a,n.props.context.loggedInUser).then(function(t){var a=n.state.currentPageItems;n.setState({currentPageItems:a,currentPage:1}),n.initTodoItems(),n.props.openMessageBox("success","Added TODO item"),e()},function(e){n.props.openMessageBox("error","Could not add TODO item"),t()})}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"finishToDoItem",value:function(){var e=Object(S.a)(P.a.mark(function e(t){var a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.finishToDoItem(t,this.props.context.loggedInUser);case 2:e.sent,(a=this.state.currentPageItems).map(function(e){e._id===t&&(e.isFinished="true")}),this.setState({currentPageItems:a});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeToDoItem",value:function(){var e=Object(S.a)(P.a.mark(function e(t){var a=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){return ae.removeToDoItem(t,a.props.context.loggedInUser).then(function(n){var s=a.state.currentPageItems.filter(function(e){return e._id!==t});a.state.totalItems>0&&s.length<=0?a.setState({currentPage:a.state.currentPage-1}):a.setState({currentPageItems:s}),a.initTodoItems(),a.props.openMessageBox("success","Removed TODO item"),e()},function(e){return a.props.openMessageBox("error","Could not delete TODO item")})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handlePageChange",value:function(){var e=Object(S.a)(P.a.mark(function e(t){var a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,this.fetchToDoListPaged(this.state.pageSize,t);case 3:a=e.sent,this.setState({currentPage:t,currentPageItems:a,isLoading:!1});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isLoading?s.a.createElement(ue,{portal:document.getElementsByClassName("todos")[0]}):"";return s.a.createElement("div",{className:"todo-list-container"},e,s.a.createElement(pe,{totalItems:this.state.totalItems,itemsPerPage:this.state.pageSize,currentPage:this.state.currentPage,handlePageChange:this.handlePageChange.bind(this)}),s.a.createElement(de,{isLoggedIn:this.props.context.isLoggedIn,itemsToDisplay:this.state.currentPageItems,addToDoItem:this.addToDoItem.bind(this),finishItem:this.finishToDoItem.bind(this),removeToDoItem:this.removeToDoItem.bind(this)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.currentDateId!==t.currentDateId&&e.context.isLoggedIn?{currentDateId:e.currentDateId}:{}}}]),t}(s.a.Component)),ve=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"getDayIdByDate",value:function(e,t){var a=j.extractIdByDate(e),n=J.generateHeaders(t.authToken),s='?query={"dayId":"'.concat(a,'", "_acl.creator" : "').concat(t.id,'"}');return new Promise(function(e,t){z(n,s).then(function(t){t.length>0&&e(t[0]._id)},function(e){return t(e)})})}},{key:"saveToMyDays",value:function(e,t){var a={dayId:j.extractIdByDate(e)},n=J.generateHeaders(t.authToken);return new Promise(function(e,t){W(a,n).then(function(t){e(t)},function(e){t(e)})})}},{key:"getSavedDays",value:function(e,t){var a=j.extractIdByDate(e),n='?query={"dayId":"'.concat(a,'", "_acl.creator" : "').concat(t.id,'"}'),s=J.generateHeaders(t.authToken);return z(s,n)}},{key:"getDaysPaged",value:function(e,t,a){var n='?query={"_acl.creator" : "'.concat(a.id,'"}&limit=').concat(e,"&skip=").concat(e*(t-1)),s=J.generateHeaders(a.authToken);return q(s,n)}},{key:"getDaysCount",value:function(e){var t=J.generateHeaders(e.authToken),a='?query={"_acl.creator":"'.concat(e.id,'"}');return K(t,a)}},{key:"removeDaysFromMyDay",value:function(e,t){var a=J.generateHeaders(t.authToken);return G(e,a)}},{key:"checkIfDayIsSaved",value:function(e,t){var a=J.generateHeaders(t.authToken),n='?query={"_acl.creator":"'.concat(t.id,'", "dayId" : "').concat(e,'"}');return new Promise(function(e,t){z(a,n).then(function(t){t.length>0&&e(!0),e(!1)})})}}]),e}(),ye=(a(67),{marginTop:"-15px",marginLeft:"50px",width:"100%"}),ke=k(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isDaySaved:a.props.isDaySaved},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"my-days-button ".concat(null===!this.props.context.isLoggedIn?"d-none":"")},s.a.createElement("button",{onClick:function(){return e.props.handleMyDaysButtonClick()},className:"tooltip-activator w-100 btn btn-primary"},s.a.createElement(oe,{position:"bottom",tooltip:this.state.isDaySaved?"Notes and other changes will remain":"Add to favorites to save notes and some extra features",customStyle:ye}),this.state.isDaySaved?"Remove day from favorites":"Save day to my favorites"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isDaySaved!==t.isDaySaved?{isDaySaved:e.isDaySaved}:{}}}]),t}(s.a.Component)),be=k(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={loggedInUser:a.props.context.loggedInUser,isDaySaved:null,currentDayId:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.context.loggedInUser&&(this.getCurrentDayId(this.props.activeDate,this.props.context.loggedInUser),this.checkIfDayIsSaved(this.props.activeDate,this.props.context.loggedInUser))}},{key:"componentWillUpdate",value:function(e){!this.state.loggedInUser||e.context.loggedInUser?(!this.state.loggedInUser&&e.context.loggedInUser&&(this.setState({loggedInUser:e.context.loggedInUser}),this.checkIfDayIsSaved(e.activeDate,e.context.loggedInUser),this.getCurrentDayId(e.activeDate,e.context.loggedInUser)),e.activeDate!==this.props.activeDate&&e.context.loggedInUser&&(this.checkIfDayIsSaved(e.activeDate,e.context.loggedInUser),this.getCurrentDayId(e.activeDate,e.context.loggedInUser))):this.setState({loggedInUser:null})}},{key:"handleMyDaysButtonClick",value:function(){var e=Object(S.a)(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),!this.state.isDaySaved){e.next=6;break}return e.next=4,this.removeDay();case 4:e.next=8;break;case 6:return e.next=8,this.saveDay();case 8:this.props.handleClickFunction&&this.props.handleClickFunction();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"checkIfDayIsSaved",value:function(){var e=Object(S.a)(P.a.mark(function e(t,a){var n=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ve.checkIfDayIsSaved(j.extractIdByDate(t),a).then(function(e){n.setState({isDaySaved:e})});case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getCurrentDayId",value:function(){var e=Object(S.a)(P.a.mark(function e(t,a){var n=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getDayIdByDate(t,a).then(function(e){e?n.setState({currentDayId:e}):n.setState({currentDayId:null,isDaySaved:!1})},function(e){});case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"saveDay",value:function(){var e=Object(S.a)(P.a.mark(function e(){var t=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ve.saveToMyDays(this.props.activeDate,this.state.loggedInUser).then(function(e){t.setState({isDaySaved:!0,currentDayId:e._id,isLoading:!1})});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"removeDay",value:function(){var e=Object(S.a)(P.a.mark(function e(){var t=this;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ve.removeDaysFromMyDay(this.state.currentDayId,this.state.loggedInUser).then(function(e){t.setState({isDaySaved:!1,currentDayId:null,isLoading:!1})});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null===this.state.isDaySaved?s.a.createElement(s.a.Fragment,null):s.a.createElement(s.a.Fragment,null,this.state.isLoading?s.a.createElement(ue,null):s.a.createElement(ke,{isDaySaved:this.state.isDaySaved,handleMyDaysButtonClick:function(){return e.handleMyDaysButtonClick()}}))}}]),t}(s.a.Component)),Ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={animateClass:"",oldDate:new Date,isLoading:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUpdate",value:function(e){var t=this;if(e.activeDate!==this.props.activeDate){this.setState({animateClass:"calendar-block-animate"});setTimeout(function(){t.setState({animateClass:""}),t.setState({oldDate:e.activeDate})},950)}}},{key:"render",value:function(){return s.a.createElement("div",{className:"status-container"},s.a.createElement("div",{className:"block-container"},s.a.createElement(C,{currentClass:"calendar-block old-calendar-block",activeDate:this.props.activeDate}),s.a.createElement(C,{currentClass:"calendar-block "+this.state.animateClass,activeDate:this.state.oldDate})),s.a.createElement(fe,{currentDateId:j.extractIdByDate(this.props.activeDate),openMessageBox:this.props.openMessageBox}),s.a.createElement(be,{activeDate:this.props.activeDate}))}}]),t}(s.a.Component),De=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={activeDate:new Date,daysInCurrentMonth:{},year:(new Date).getFullYear(),month:(new Date).getMonth(),animation:{moveYear:"",moveMonth:""}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({daysInCurrentMonth:this.createCurrentMonthObject()})}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.animation;""!==t.moveYear&&setTimeout(function(){t.moveYear="",e.setState({animation:t})},1e3),""!==t.moveMonth&&setTimeout(function(){t.moveMonth="",e.setState({animation:t})},1e3)}},{key:"updateYear",value:function(e){var t=this.state.animation;t.moveYear=e<0?"year-left":"year-right",this.setState({year:this.state.year+e,currentMonth:this.createCurrentMonthObject(),animation:t})}},{key:"updateMonth",value:function(e){var t=this.state.animation;t.moveMonth=e<0?"month-left":"month-right";var a,n=this.state.year;0===this.state.month&&-1===e?(a=11,n=this.state.year-1):11===this.state.month&&1===e?(a=0,n=this.state.year+1):a=this.state.month+e,this.setState({month:a,year:n})}},{key:"createCurrentMonthObject",value:function(){for(var e=[],t=6-new Date(this.state.year,this.state.month,this.getDaysInMonth()-1).getDay(),a=this.getDaysInMonth(this.state.month-1),n=a-this.getFirstDayOfMonth()+1;n<=a;n++)e.push({dayValue:n,dayClass:"last-month"});for(var s=1;s<=this.getDaysInMonth();s++){var r=new Date,i=new Date(this.state.year,this.state.month,s),o="current-month";s===r.getDate()&&this.state.month===r.getMonth()&&this.state.year===r.getFullYear()&&(o+=" today"),j.compareDates(this.state.activeDate,i)&&(o+=" active"),e.push({dayValue:s,dayClass:o})}for(var c=1;c<=t;c++)e.push({dayValue:c,dayClass:"next-month"});return e}},{key:"getDaysInMonth",value:function(e){return null!=e?(-1===e&&(e=11),new Date(this.state.year,e+1,0).getDate()):new Date(this.state.year,this.state.month+1,0).getDate()}},{key:"getFirstDayOfMonth",value:function(){return new Date(this.state.year,this.state.month,0).getDay()}},{key:"handleDayBlockClicked",value:function(e){if(e.id.startsWith("d-")&&e.className.includes("current-month")){var t=new Date(this.state.year,this.state.month,e.value);this.setState({activeDate:t})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendar-container"},s.a.createElement("div",{className:"body-container"},s.a.createElement("div",{className:"calendar-header"},s.a.createElement("div",{className:"year"},s.a.createElement("button",{onClick:function(){return e.updateYear(-1)}}),s.a.createElement("p",{className:this.state.animation.moveYear},this.state.year),s.a.createElement("button",{onClick:function(){return e.updateYear(1)}})),s.a.createElement("div",{className:"month"},s.a.createElement("button",{onClick:function(){return e.updateMonth(-1)}}),s.a.createElement("p",{className:this.state.animation.moveMonth},I.MONTHS_MAP[this.state.month]),s.a.createElement("button",{onClick:function(){return e.updateMonth(1)}}))),s.a.createElement(O,{clickHandler:this.handleDayBlockClicked.bind(this),currentMonth:this.createCurrentMonthObject()})),s.a.createElement(Ee,{openMessageBox:this.props.openMessageBox,activeDate:this.state.activeDate}))}}]),t}(s.a.Component),Ie=(a(69),a(19)),Oe=a(18),Ce=(a(71),a(29)),we=(a(73),a(13));Ie.b.add(Oe.b,Oe.c);var Pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={pager:{}},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.items&&this.props.items.length&&this.resetPage()}},{key:"componentDidUpdate",value:function(e,t){this.props.items!==e.items&&this.resetPage()}},{key:"resetPage",value:function(){this.setPage(this.props.initialPage)}},{key:"setPage",value:function(e){var t=this.props,a=t.items,n=t.pageSize,s=this.state.pager;if(!(e<1||e>s.totalPages)){var r;r=this.state.pager.currentPage<e?"animate-left":this.state.pager.currentPage>e?"animate-right":"",s=this.getPager(a.length,e,n);var i=a.slice(s.startIndex,s.endIndex+1);this.setState({pager:s}),this.props.onChangePage(i,r)}}},{key:"getPager",value:function(e,t,a){t=t||1,a=a||10;var n,s,r=Math.ceil(e/a);r<=10?(n=1,s=r):t<=6?(n=1,s=10):t+4>=r?(n=r-9,s=r):(n=t-5,s=t+4);var i=(t-1)*a,o=Math.min(i+a-1,e-1),c=Object(Ce.a)(Array(s+1-n).keys()).map(function(e){return n+e});return{totalItems:e,currentPage:t,pageSize:a,totalPages:r,startPage:n,endPage:s,startIndex:i,endIndex:o,pages:c}}},{key:"render",value:function(){var e=this,t=this.state.pager;return!t.pages||t.pages.length<=1?null:s.a.createElement("ul",{className:"pagination"},s.a.createElement("div",{className:"pag-wrapper"},s.a.createElement("li",{className:1===t.currentPage?"disabled":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(t.currentPage-1)}},s.a.createElement(we.a,{icon:"angle-left"}))),t.pages.map(function(a,n){return s.a.createElement("li",{key:n,className:t.currentPage===a?"active":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(a)}},a))}),s.a.createElement("li",{className:t.currentPage===t.totalPages?"disabled":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(t.currentPage+1)}},s.a.createElement(we.a,{icon:"angle-right"})))))}}]),t}(s.a.Component);Pe.defaultProps={initialPage:1,pageSize:10};var Se=Pe,je=function(e,t,a){var n='?query={"dayId":"'.concat(t,'", "_acl.creator":"').concat(e,'"}');return F("notes",a,n)},xe=function(e,t){return V("notes",t,e)},Ne=function(e,t){return Y("notes",e,t)},Me=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"addNote",value:function(e,t){var a=J.generateHeaders(t.authToken);return new Promise(function(t,n){xe(e,a).then(function(e){e.dayId,e._id;t()},function(e){n(e),console.log(e)})})}},{key:"getNotesForUserById",value:function(e,t,a){var n=J.generateHeaders(a);return new Promise(function(a,s){je(e,t,n).then(function(e){a(e)},function(e){s(e)})})}},{key:"deleteNote",value:function(e,t){var a=J.generateHeaders(t.authToken);return new Promise(function(t,n){Ne(e,a).then(function(e){t(e)},function(e){n(e)})})}}]),e}(),Le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).scrollPosition=0,a.state={loggedInUser:a.props.loggedInUser,isLoggedIn:a.props.isLoggedIn,notes:null,currentNotesPage:[],notesAnimation:"",modalData:{isOpen:!1,idToDelete:"",animateClass:""}},a.handlePageChange=a.handlePageChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.isLoggedIn&&this.updateNotes(this.props.loggedInUser,this.props.activeDate)}},{key:"componentWillUpdate",value:function(e){var t=this;null!=i.a.findDOMNode(this)&&(this.scrollPosition=window.scrollY),e.isLoggedIn&&e.activeDate&&(e.isLoggedIn&&!this.state.isLoggedIn&&(this.setState({isLoggedIn:!0,loggedInUser:e.loggedInUser}),this.updateNotes(e.loggedInUser,e.activeDate)),!this.state.isLoggedIn&&e.isLoggedIn&&e.loggedInUser&&this.updateNotes(e.loggedInUser,e.activeDate),j.compareDates(this.props.activeDate,e.activeDate)||this.updateNotes(e.loggedInUser,e.activeDate),e.isThisViewActive&&!this.props.isThisViewActive&&(this.setState({isLoading:!0}),this.fetchNotes(e.loggedInUser,e.activeDate).then(function(e){t.setState({isLoading:!1}),e.equals(t.state.notes)||t.setState({notes:e})})))}},{key:"componentDidUpdate",value:function(){var e=this;null!=i.a.findDOMNode(this)&&setTimeout(function(){window.scrollTo(0,e.scrollPosition)},1);""!==this.state.notesAnimation&&setTimeout(function(){return e.setState({notesAnimation:""})},550)}},{key:"deleteNote",value:function(){var e=this,t=this.state.modalData.idToDelete,a=this.showMessageBox.bind(this);this.setState({isLoading:!0}),Me.deleteNote(t,this.state.loggedInUser).then(function(t){a("success","Deleted note"),e.fetchNotes(e.props.loggedInUser,e.props.activeDate).then(function(t){return e.setState({notes:t,isLoading:!1})}),e.closeModal()},function(e){a("error","Failed to delete note")})}},{key:"fetchNotes",value:function(e,t){if(e)return Me.getNotesForUserById(e.id,j.extractIdByDate(t),e.authToken)}},{key:"updateNotes",value:function(e,t){var a=this;this.setState({isLoading:!0}),this.fetchNotes(e,t).then(function(e){a.setState({notes:e,isLoading:!1})})}},{key:"showMessageBox",value:function(e,t){this.props.openMessageBox(e,t)}},{key:"openModal",value:function(e){var t=this.state.modalData;t.isOpen=!0,t.idToDelete=e,t.animateClass="show",this.setState({modalData:t})}},{key:"closeModal",value:function(){var e=this.state.modalData;e.isOpen=!1,e.animateClass="hide",this.setState({modalData:e})}},{key:"handlePageChange",value:function(e,t){this.setState({currentNotesPage:e,notesAnimation:t})}},{key:"renderNotes",value:function(){var e=this;if(!this.state.isLoggedIn)return"Login to add some notes";if(null!==this.state.notes){if(0===this.state.notes.length)return"No notes for this day yet";var t=[];t.push(s.a.createElement(Se,{key:"pag-notes",items:this.state.notes,onChangePage:this.handlePageChange,pageSize:5}));var a=[s.a.createElement("div",{key:"note-anim-div",className:"note-anim "+this.state.notesAnimation},this.state.currentNotesPage.map(function(t){return s.a.createElement("li",{key:t._id},t.noteContent,s.a.createElement("span",{key:"dada",className:"delete-note-btn tooltip-activator",onClick:function(){return e.openModal(t._id)}},s.a.createElement(oe,{tooltip:"Delete this note"}),s.a.createElement("a",{href:"#"},"X")))}))];return t.push(a),t}}},{key:"render",value:function(){var e=this,t=this.state.isLoading?s.a.createElement(ue,null):"",a=this.state.modalData.isOpen?s.a.createElement(re,{isOpen:this.state.modalData.isOpen,closeFunction:function(){return e.closeModal()},confirmFunction:function(){return e.deleteNote()},confirmationMessage:"This will delete the note"}):"";return s.a.createElement("ul",{className:"notes-list"},t,this.renderNotes(),a)}}]),t}(s.a.Component),Ue=(a(76),a(78),function(e){function t(){return j.extractDateById(e.currentDateId)}function a(){return e.isStretched?I.MONTHS_MAP[t().getMonth()]:I.MONTHS_MAP[t().getMonth()].toString().substr(0,3)}return s.a.createElement("div",{className:"calendar-header ".concat(e.isStretched?"stretched":"")},e.isStretched?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"calendar-day-month"},a()),s.a.createElement("div",{className:"calendar-day-year"},t().getFullYear())):s.a.createElement("div",{className:"calendar-day-year-month-container"},s.a.createElement("span",{className:"calendar-day-month"},a()),s.a.createElement("span",{className:"calendar-day-year"},t().getFullYear())),s.a.createElement("div",{className:"calendar-day-number"},t().getDate()),s.a.createElement("div",{className:"calendar-day-day-of-week"},I.DAYS_MAP[t().getDay()]))}),Te=(a(80),a(82),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={activeLinks:{isNotesActive:!0,isOnThisDayActive:!1,isTodoListActive:!1}},a.handleLinkClick=a.handleLinkClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleLinkClick",value:function(e){for(var t={},a=Object.entries(this.state.activeLinks),n=0;n<a.length;n++){var s=a[n],r=Object(p.a)(s,1)[0];t[r]=r.toLowerCase().includes(e.target.name.toLowerCase())}this.props.linkChangeHandler(t),this.setState({activeLinks:t})}},{key:"render",value:function(){return s.a.createElement("div",{className:"calendar-day-body-navigation "},s.a.createElement("ul",null,s.a.createElement("li",{className:this.state.activeLinks.isNotesActive?"active":""},s.a.createElement("a",{onClick:this.handleLinkClick,name:"notes",href:"#"},"Notes")),s.a.createElement("li",{className:this.state.activeLinks.isTodoListActive?"active":""},s.a.createElement("a",{onClick:this.handleLinkClick,name:"todolist",href:"#"},"TODO List")),s.a.createElement("li",{className:this.state.activeLinks.isOnThisDayActive?"active":""},s.a.createElement("a",{onClick:this.handleLinkClick,name:"onthisday",href:"#"},"On this day"))))}}]),t}(s.a.Component)),Be=(a(84),function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"loginUser",value:function(t){var a=e.setToken;return new Promise(function(e,n){U(t).then(function(t){var n=t._kmd.authtoken;a(n),e(n)},function(e){n(e)})})}},{key:"isLoggedIn",value:function(){return!!e.getToken()}},{key:"logout",value:function(){return new Promise(function(t,a){var n={Authorization:"Kinvey "+e.getToken()};B(n).then(function(e){localStorage.removeItem("user_token"),t(e)},function(e){a(e)})})}},{key:"getCurrentUserDTO",value:function(){if(e.isLoggedIn())return new Promise(function(t,a){_(e.getToken()).then(function(a){var n={};n.id=a._id,n.authToken=a._kmd.authtoken,n.authToken=e.getToken(),t(n)},function(e){console.error(e),a(e)})})}},{key:"setToken",value:function(e){localStorage.setItem("user_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("user_token")}}]),e}()),Ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={note:"",isLoading:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"showMessageBox",value:function(e,t){this.props.openMessageBox(e,t)}},{key:"emptyTextArea",value:function(){this.setState({note:""})}},{key:"stopLoading",value:function(){this.setState({isLoading:!1})}},{key:"updateNote",value:function(e){this.setState({note:e.target.value})}},{key:"submitNote",value:function(e){if(e.preventDefault(),""!==this.state.note){var t={};t.dayId=j.extractIdByDate(this.props.activeDate),t.noteContent=this.state.note;var a,n=this.emptyTextArea.bind(this),s=this.stopLoading.bind(this),r=this.showMessageBox.bind(this);this.setState({isLoading:!0}),Be.getCurrentUserDTO().then(function(e){a=e,Me.addNote(t,a).then(function(e){r("success","Added a note"),n(),s()},function(e){r("error","Could not add note"),s()})},function(e){r("error","You are not logged in")})}}},{key:"render",value:function(){var e,t=this;return e=this.state.isLoading?s.a.createElement(ue,null):s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{value:this.state.note,rows:"3",className:"form-control",onChange:function(e){return t.updateNote(e)}})),s.a.createElement("form",{className:"add-note-form"},e,s.a.createElement("button",{onClick:function(e){return t.submitNote(e)},className:"btn btn-primary"},"Add note"))}}]),t}(s.a.Component),_e=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isFlipped:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"switchView",value:function(){this.setState({isFlipped:!this.state.isFlipped}),this.props.switchView()}},{key:"render",value:function(){var e=this;return s.a.createElement("button",{className:"switch-view ".concat(this.props.isActive?" enabled":" disabled"),onClick:function(){return e.switchView()}},this.state.isFlipped?this.props.messagesArray[0]:this.props.messagesArray[1])}}]),t}(s.a.Component),Fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={savedDayId:null,isFlipped:!1,isLoading:!1,isDaySaved:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"switchView",value:function(){this.setState({isFlipped:!this.state.isFlipped})}},{key:"render",value:function(){var e=this,t=this.state.isLoading?s.a.createElement(ue,null):"";return s.a.createElement(v.Consumer,null,function(a){return s.a.createElement("div",{className:"notes-container"},t,s.a.createElement(_e,{isActive:a.isLoggedIn,switchView:function(){return e.switchView()},messagesArray:["Go back to notes","Add notes for this day"]}),s.a.createElement("div",{className:"view-note-container\n                        ".concat(e.state.isFlipped?"flipped":"")},s.a.createElement("div",{className:"notes-view"},s.a.createElement(Le,{isLoggedIn:a.isLoggedIn,loggedInUser:a.loggedInUser,openMessageBox:e.props.openMessageBox,activeDate:e.props.activeDate,isThisViewActive:!e.state.isFlipped})),s.a.createElement("div",{className:"save-note back"},s.a.createElement(Ae,{openMessageBox:e.props.openMessageBox,activeDate:e.props.activeDate}))))})}}]),t}(s.a.Component),Ve=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={activeLinks:{isNotesActive:!0,isOnThisDayActive:!1,isTodoListActive:!1}},a.linkChangeHandler=a.linkChangeHandler.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"linkChangeHandler",value:function(e){this.setState({activeLinks:e})}},{key:"renderView",value:function(){var e=[];return this.state.activeLinks.isNotesActive?e=s.a.createElement(Fe,{openMessageBox:this.props.openMessageBox,activeDate:j.extractDateById(this.props.currentDateId)}):this.state.activeLinks.isOnThisDayActive||this.state.activeLinks.isTodoListActive&&(e=s.a.createElement(fe,{currentDateId:this.props.currentDateId,openMessageBox:this.props.openMessageBox})),e}},{key:"render",value:function(){return s.a.createElement("div",{className:"calendar-day-body"},s.a.createElement(Te,{linkChangeHandler:this.linkChangeHandler}),s.a.createElement("div",{className:"view-container"},this.renderView()))}}]),t}(s.a.Component),He={width:"80%",transform:"none",background:"#EEE","text-shadow":"none","box-shadow":"none",border:"3px solid black"},Ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isStretched:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleDayStretch",value:function(){this.setState({isStretched:!this.state.isStretched})}},{key:"renderModal",value:function(){var e=this,t=[];return this.state.isStretched&&t.push(s.a.createElement(se,{customStyle:He,isOpen:this.state.isStretched,closeFunction:function(){return e.handleDayStretch()}},s.a.createElement("div",{className:"calendar-day stretched"},s.a.createElement(Ue,{isStretched:!0,currentDateId:this.props.currentDateId}),s.a.createElement(Ve,{openMessageBox:this.props.openMessageBox,currentDateId:this.props.currentDateId})))),t}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"outer-wrapper"},this.renderModal(),s.a.createElement("div",{className:"calendar-day"},s.a.createElement("div",{onClick:function(){return e.handleDayStretch()}},s.a.createElement(Ue,{currentDateId:this.props.currentDateId})),s.a.createElement(be,{handleClickFunction:this.props.shouldCheckIfDaysAreChanged,activeDate:j.extractDateById(this.props.currentDateId)})))}}]),t}(s.a.Component),Re=(a(86),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentUser:a.props.loggedInUser,totalItems:0,pageSize:3,currentPage:1,currentPageItems:[],isLoading:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0===this.state.currentPageItems.length&&this.state.currentUser&&this.fetchDays()}},{key:"componentDidUpdate",value:function(e,t){this.state.isLoading||this.props.isLoggedIn&&this.state.currentUser&&(0!==this.state.totalItems&&0!==this.state.currentPageItems.length||this.fetchDays())}},{key:"fetchDays",value:function(){var e=this;this.setState({isLoading:!0}),ve.getDaysCount(this.state.currentUser).then(function(t){ve.getDaysPaged(e.state.pageSize,e.state.currentPage,e.state.currentUser).then(function(t){e.setState({currentPageItems:t,isLoading:!1})}),e.setState({totalItems:t.count})})}},{key:"handlePageChange",value:function(e){var t=this;this.setState({isLoading:!0}),ve.getDaysPaged(this.state.pageSize,e,this.state.currentUser).then(function(a){t.setState({currentPageItems:a,isLoading:!1,currentPage:e})})}},{key:"renderDays",value:function(){var e=this;if(!this.state.currentUser)return s.a.createElement("div",null,'"Please log in to view favorite days"');var t=[];return this.state.currentPageItems.map(function(a){t.push(s.a.createElement(Ye,{key:a._id,openMessageBox:e.props.openMessageBox,currentDateId:a.dayId,shouldCheckIfDaysAreChanged:function(){return e.fetchDays()}}))}),t}},{key:"render",value:function(){var e=this.state.isLoading?s.a.createElement(ue,null):"";return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"top-div"},s.a.createElement(pe,{totalItems:this.state.totalItems,itemsPerPage:this.state.pageSize,currentPage:this.state.currentPage,handlePageChange:this.handlePageChange.bind(this)})),s.a.createElement("div",{className:"my-days-container"},e,this.renderDays()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isLoggedIn&&e.currentUser?{currentUser:e.currentUser}:{currentUser:void 0,totalItems:0,currentPageItems:[]}}}]),t}(s.a.Component));Ie.b.add(Oe.d,Oe.f,Oe.e,Oe.g,Oe.a);var We=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.bindCustomArrayEqualsMethod()}},{key:"bindCustomArrayEqualsMethod",value:function(){Array.prototype.equals=function(e){if(!e)return!1;if(this.length!==e.length)return!1;for(var t=0,a=this.length;t<a;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]===e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendar-app-container"},s.a.createElement(v.Consumer,null,function(e){return s.a.createElement(E,{isLoggedIn:e.isLoggedIn})}),s.a.createElement(y.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(De,{openMessageBox:e.props.openMessageBox})}}),s.a.createElement(y.a,{path:"/calendar",render:function(t){return s.a.createElement(De,{openMessageBox:e.props.openMessageBox})}}),s.a.createElement(y.a,{exact:!0,path:"/my_notes",render:function(t){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(Le,{openMessageBox:e.props.openMessageBox,loggedInUser:t.loggedInUser,isLoggedIn:t.isLoggedIn,activeDate:new Date})})}}),s.a.createElement(y.a,{exact:!0,path:"/my_days",render:function(t){return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement(Re,{isLoggedIn:t.isLoggedIn,currentUser:t.loggedInUser,openMessageBox:e.props.openMessageBox})})}}))}}]),t}(n.Component),ze=(a(88),a(28)),qe=(a(91),function(e,t,a){e.classList.add(t),setTimeout(function(){e.classList.remove("shake-animate")},a)}),Ke=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"isUsernameAlreadyTaken",value:function(e){var t={username:e};return new Promise(function(e,a){A(t).then(function(t){e(t)},function(e){a(e)})})}},{key:"registerUser",value:function(e){return new Promise(function(t,a){T(e).then(function(e){t(e)},function(e){a(e)})})}}]),e}(),Ge=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={registerUsername:"",registerEmail:"",registerPassword:"",registerConfirmPassword:"",isUsernameValid:!1,isEmailValid:!1,isPasswordValid:!1,isConfirmPasswordValid:!1,warningDivClass:"text-warning",checkingUser:!1,registerLoading:!1,usernameExists:!0,showUsernameTooltip:!1},a.handleInputChange=a.handleInputChange.bind(Object(m.a)(Object(m.a)(a))),a.registerUser=a.registerUser.bind(Object(m.a)(Object(m.a)(a))),a.checkIfUsernameExists=a.checkIfUsernameExists.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState({warningDivClass:"text-warning"})}},{key:"closeForm",value:function(){this.setState({warningDivClass:"text-warning"}),this.props.closeModal()}},{key:"checkIfUsernameExists",value:function(){var e=this;this.isUsernameValid(this.state.registerUsername)&&(this.setState({checkingUser:!0}),Ke.isUsernameAlreadyTaken(this.state.registerUsername).then(function(t){t.usernameExists?e.setState({usernameExists:!0,showUsernameTooltip:!0}):e.setState({usernameExists:!1,showUsernameTooltip:!1}),e.setState({checkingUser:!1})}))}},{key:"areInputsValid",value:function(){return this.state.isUsernameValid&&this.state.isEmailValid&&this.state.isPasswordValid&&this.state.isConfirmPasswordValid}},{key:"registerUser",value:function(e){var t=this;if(this.areInputsValid()&&!this.state.usernameExists){var a={username:this.state.registerUsername,password:this.state.registerPassword,email:this.state.registerEmail};this.setState({registerLoading:!0});var n=this.props.closeModal;Ke.registerUser(a).then(function(e){t.setState({registerLoading:!1}),t.props.openMessageBox("success","Registered successfully"),n()},function(e){t.props.openMessageBox("error","Failed to register")})}else{var s=e.target.parentNode.parentNode.parentNode;qe(s,"shake-animate",700),this.setState({warningDivClass:"text-danger"})}}},{key:"handleInputChange",value:function(e){var t,a=e.target.value,n=e.target.name;switch(n.toLowerCase().includes("password")&&(a=btoa(a)),this.setState(Object(ze.a)({},"register"+n,a)),n){case"Username":t=this.isUsernameValid(a),this.setState({isUsernameValid:t});break;case"Email":t=this.isEmailValid(a),this.setState({isEmailValid:t});break;case"Password":t=this.isPasswordValid(a),this.setState({isPasswordValid:t});break;case"ConfirmPassword":t=this.isConfirmPasswordValid(a),this.setState({isConfirmPasswordValid:t})}}},{key:"isUsernameValid",value:function(e){return e.length>=3&&e.length<=16}},{key:"isPasswordValid",value:function(e){return atob(e).length>=3}},{key:"isEmailValid",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"isConfirmPasswordValid",value:function(e){return atob(this.state.registerPassword)===atob(e)}},{key:"render",value:function(){var e=this,t=this.state.checkingUser?s.a.createElement(ue,null):"",a=this.state.registerLoading?s.a.createElement(ue,null):"";return s.a.createElement("form",{method:"GET",className:"user-form user-register-form"},a,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-username"},"Username:"),s.a.createElement("div",{className:"".concat(this.state.warningDivClass," ").concat(this.state.isUsernameValid?"hide":" ")},"Username can be between 3 and 16 letters long"),s.a.createElement("div",{className:"position-relative"},s.a.createElement("input",{name:"Username",className:"form-control",id:"register-username",type:"text",placeholder:"Username",onChange:this.handleInputChange,onBlur:this.checkIfUsernameExists}),s.a.createElement("span",{className:this.state.usernameExists?"hide":"show"},s.a.createElement(we.a,{icon:"check-circle"})),s.a.createElement("span",{className:this.state.usernameExists?"show":"hide"},s.a.createElement("span",{id:"username-taken-tooltip",className:this.state.showUsernameTooltip?"show":"hide"},"username taken"),s.a.createElement(we.a,{icon:"times-circle"})),t)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-password"},"Email:"),s.a.createElement("div",{className:"".concat(this.state.warningDivClass," ").concat(this.state.isEmailValid?"hide":" ")},'Email should be "example@mailService.domain"'),s.a.createElement("div",{className:"position-relative"},s.a.createElement("input",{name:"Email",className:"form-control",id:"register-email",type:"email",placeholder:"Email",onChange:this.handleInputChange}),s.a.createElement("span",{className:this.state.isEmailValid?"show":"hide"},s.a.createElement(we.a,{icon:"check-circle"})),s.a.createElement("span",{className:this.state.isEmailValid?"hide":"show"},s.a.createElement(we.a,{icon:"times-circle"})))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-password"},"Password:"),s.a.createElement("div",{className:"".concat(this.state.warningDivClass," ").concat(this.state.isPasswordValid?"hide":" ")},"Password must be atleast 3 symbols"),s.a.createElement("div",{className:"position-relative"},s.a.createElement("input",{name:"Password",className:"form-control",id:"register-password",type:"password",placeholder:"password",onChange:this.handleInputChange}),s.a.createElement("span",{className:this.state.isPasswordValid?"show":"hide"},s.a.createElement(we.a,{icon:"check-circle"})),s.a.createElement("span",{className:this.state.isPasswordValid?"hide":"show"},s.a.createElement(we.a,{icon:"times-circle"})))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-password"},"Confirm Password:"),s.a.createElement("div",{className:"".concat(this.state.warningDivClass," ").concat(this.state.isConfirmPasswordValid?"hide":" ")},"Passwords don't match"),s.a.createElement("div",{className:"position-relative"},s.a.createElement("input",{name:"ConfirmPassword",className:"form-control",id:"register-confirm-password",type:"password",placeholder:"confirm password",onChange:this.handleInputChange}),s.a.createElement("span",{className:this.state.isConfirmPasswordValid?"show":"hide"},s.a.createElement(we.a,{icon:"check-circle"})),s.a.createElement("span",{className:this.state.isConfirmPasswordValid?"hide":"show"},s.a.createElement(we.a,{icon:"times-circle"})))),s.a.createElement("div",{className:"form-group pl-1"},s.a.createElement("button",{type:"button",onClick:this.registerUser,className:"btn btn-primary"},"Register"),s.a.createElement("button",{type:"button",onClick:function(){return e.closeForm()},className:"btn btn-primary"},"Cancel")))}}]),t}(s.a.Component),Je=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={startLoading:!1,loginUsername:"",loginPassword:""},a.handleUsernameChange=a.handleUsernameChange.bind(Object(m.a)(Object(m.a)(a))),a.handlePasswordChange=a.handlePasswordChange.bind(Object(m.a)(Object(m.a)(a))),a.loginUser=a.loginUser.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"stopLoading",value:function(){this.setState({startLoading:!1})}},{key:"loginUser",value:function(e){var t=this,a=e.target.parentNode.parentNode.parentNode,n={username:this.state.loginUsername,password:this.state.loginPassword},s=this.props.closeModal,r=this.stopLoading.bind(this),i=this.props.loginHandler;this.setState({startLoading:!0}),Be.loginUser(n).then(function(e){r(),s(),i(),t.props.openMessageBox("success","Logged in")},function(e){r(),t.props.openMessageBox("error","Wrong account or password"),qe(a,"shake-animate",700)})}},{key:"handleUsernameChange",value:function(e){var t=e.target.value;this.setState({loginUsername:t})}},{key:"handlePasswordChange",value:function(e){var t=btoa(e.target.value);this.setState({loginPassword:t})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"user-form user-login-form"},this.state.startLoading?s.a.createElement(ue,null):"",s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"login-username"},"Username:"),s.a.createElement("input",{className:"form-control",id:"login-username",type:"text",placeholder:"username",onChange:this.handleUsernameChange})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"login-password"},"Password:"),s.a.createElement("input",{className:"form-control",id:"login-password",type:"password",placeholder:"password",onChange:this.handlePasswordChange})),s.a.createElement("div",{className:"form-group pl-1"},s.a.createElement("button",{type:"button",onClick:this.loginUser,className:"btn btn-primary"},"Login"),s.a.createElement("button",{type:"button",onClick:function(){return e.props.closeModal()},className:"btn btn-primary"},"Cancel")))}}]),t}(s.a.Component),Xe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isLoginModalOpen:!1,isRegisterModalOpen:!1,mouseOver:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState({isLoggedIn:this.props.isLoggedIn})}},{key:"componentWillUpdate",value:function(e){this.state.isLoggedIn!==e.isLoggedIn&&this.setState({isLoggedIn:e.isLoggedIn})}},{key:"closeModal",value:function(e){switch(e.toLowerCase()){case"login":this.state.isLoginModalOpen&&this.setState({isLoginModalOpen:!1});break;case"register":this.state.isRegisterModalOpen&&this.setState({isRegisterModalOpen:!1})}}},{key:"openModal",value:function(e){switch(e.toLowerCase()){case"login":this.state.isLoginModalOpen||this.setState({isLoginModalOpen:!0});break;case"register":this.state.isRegisterModalOpen||this.setState({isRegisterModalOpen:!0})}}},{key:"logout",value:function(){var e=this;Be.logout().then(function(){e.props.openMessageBox("success","Logged out"),e.contextNotifier()})}},{key:"handleMouseOver",value:function(){this.setState({mouseOver:!0})}},{key:"handleMouseLeave",value:function(){this.setState({mouseOver:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement(v.Consumer,null,function(t){return s.a.createElement("div",{onMouseEnter:function(){return e.handleMouseOver()},onMouseLeave:function(){return e.handleMouseLeave()},className:"user-navigation-container ".concat(e.state.mouseOver?"show":"hide")},e.contextNotifier=t.handleUserChange,s.a.createElement("ul",{className:"user-nav"},s.a.createElement("li",{className:"user-nav-link ".concat(t.isLoggedIn?"hidden":"")},s.a.createElement("a",{href:"#",onClick:function(){return e.openModal("login")}},"Login")),s.a.createElement("li",{className:"user-nav-link ".concat(t.isLoggedIn?"hidden":"")},s.a.createElement("a",{onClick:function(){return e.openModal("register")},href:"#"},"Register")),s.a.createElement("li",{className:"user-nav-link ".concat(t.isLoggedIn?"":"hidden")},s.a.createElement("a",{onClick:function(){return e.logout()},href:"#"},"Logout"))),s.a.createElement(se,{customStyle:{marginTop:0,width:"40%"},isOpen:e.state.isRegisterModalOpen,closeFunction:function(){return e.closeModal("register")}},s.a.createElement(Ge,{openMessageBox:e.props.openMessageBox,closeModal:function(){return e.closeModal("register")}})),s.a.createElement(se,{customStyle:{marginTop:"5%"},isOpen:e.state.isLoginModalOpen,closeFunction:function(){return e.closeModal("Login")}},s.a.createElement(Je,{openMessageBox:e.props.openMessageBox,loginHandler:e.contextNotifier,closeModal:function(){return e.closeModal("login")}})))})}}]),t}(n.Component),Qe=(a(93),document.getElementById("message-box-container")),Ze=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={animationClass:"hide"},a.messageBox=document.createElement("div"),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;"success"!==this.props.type&&"info"!==this.props.type||setTimeout(function(){e.closeMessageBox()},3e3),this.handleContainerClassChange("show"),Qe.appendChild(this.messageBox),setTimeout(function(){e.setState({animationClass:"show"})},10)}},{key:"componentWillUnmount",value:function(){this.handleContainerClassChange("hide")}},{key:"closeMessageBox",value:function(){var e=this;this.setState({animationClass:"hide"}),setTimeout(function(){e.props.closeFunction&&e.props.closeFunction(),Qe.contains(e.messageBox)&&Qe.removeChild(e.messageBox)},1e3)}},{key:"handleBoxClick",value:function(){this.closeMessageBox()}},{key:"handleContainerClassChange",value:function(e){"show"===e.toLowerCase()?(Qe.classList.add("show"),Qe.classList.remove("hide")):"hide"===e.toLowerCase()&&(Qe.classList.add("hide"),Qe.classList.remove("show"))}},{key:"render",value:function(){var e=this;return i.a.createPortal(s.a.createElement("div",{onClick:function(){return e.handleBoxClick()},className:"message-box-content "+this.props.type+"  "+this.state.animationClass},s.a.createElement("div",{className:"message-box-message"},s.a.createElement("span",{className:"message-type"},this.props.type.charAt(0).toUpperCase()+this.props.type.slice(1)+": "),this.props.message)),this.messageBox)}}]),t}(s.a.Component);Ze.defaultProps={type:"info",message:"Message text"};var $e=Ze,et=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(s)))).state={isLoggedIn:null,loggedInUser:null},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.handleUserChange()}},{key:"handleUserChange",value:function(){var e=this;Be.isLoggedIn()?Be.getCurrentUserDTO().then(function(t){return e.setState({loggedInUser:t,isLoggedIn:!0})}):this.setState({isLoggedIn:!1,loggedInUser:null})}},{key:"render",value:function(){var e=this;return s.a.createElement(v.Provider,{value:{isLoggedIn:this.state.isLoggedIn,loggedInUser:this.state.loggedInUser,handleUserChange:function(){return e.handleUserChange()}}},this.props.children)}}]),t}(n.Component),tt=(a(95),a(97),a(99),a(101),a(103),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={messageBox:{type:"",closeFunction:"",message:""}},a.openMessageBox=a.openMessageBox.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"openMessageBox",value:function(e,t){var a={type:e,message:t};this.setState({messageBox:a})}},{key:"resetMessageBox",value:function(){this.setState({messageBox:{}})}},{key:"render",value:function(){var e,t=this;return this.state.messageBox.type&&this.state.messageBox.message&&(e=s.a.createElement($e,{closeFunction:function(){return t.resetMessageBox()},type:this.state.messageBox.type,message:this.state.messageBox.message})),s.a.createElement("div",{className:"app-container"},e,s.a.createElement(et,null,s.a.createElement(Xe,{openMessageBox:this.openMessageBox}),s.a.createElement(g.a,null,s.a.createElement(We,{openMessageBox:this.openMessageBox}))))}}]),t}(n.Component));i.a.render(s.a.createElement(tt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[30,2,1]]]);
//# sourceMappingURL=main.d58c77c2.chunk.js.map