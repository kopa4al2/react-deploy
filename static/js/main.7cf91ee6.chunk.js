(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t){e.exports={MONTHS_MAP:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"Semptember",9:"October",10:"November",11:"December"},DAYS_MAP:{0:"MON",1:"TUE",2:"WED",3:"THU",4:"FRI",5:"SAT",6:"SUN",7:"SUN"}}},,function(e,t,a){},,,,,function(e,t,a){e.exports=a(56)},,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);a(18);var n=a(0),s=a.n(n),i=a(9),o=a.n(i);a(24),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=a(1),c=a(2),l=a(4),u=a(3),h=a(5),d=(a(26),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("li",{className:this.props.isActive,onClick:function(){return e.props.click(e)}},this.props.name)}}]),t}(n.Component)),m=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleLinkClick",value:function(e){var t=Array(this.state.totalLinks).fill("");t[e]="nav-link-active",this.setState({linksStatus:t})}},{key:"render",value:function(){return s.a.createElement("nav",{className:"navigation-bar"},s.a.createElement("div",{className:"logo-container"},s.a.createElement("h2",null,"Calendar")),s.a.createElement("div",{className:"url-container"},s.a.createElement("ul",null,s.a.createElement(d,{name:"Home",click:this.handleLinkClick.bind(this)}),s.a.createElement(d,{name:"My days",click:this.handleLinkClick.bind(this)}))))}}]),t}(n.Component),g=(a(28),a(31),a(12),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"day-block ".concat(this.props.className),onClick:function(){return e.props.clickHandler(e)}},this.props.value)}}]),t}(s.a.Component)),p=a(10),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={currentMonth:a.props.currentMonth},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.currentMonth)!==JSON.stringify(e.currentMonth)&&this.setState({currentMonth:e.currentMonth})}},{key:"renderBlock",value:function(e,t,a){return s.a.createElement(g,{key:a,id:a,value:e,className:t,clickHandler:this.props.clickHandler})}},{key:"renderHeader",value:function(){for(var e=[],t=0;t<7;t++)e.push(this.renderBlock(p.DAYS_MAP[t],"block-heading","h-".concat(t)));return e}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendar-body"},this.renderHeader(),this.state.currentMonth.map(function(t,a){return e.renderBlock(t.dayValue,t.dayClass,"d-"+a)}))}}]),t}(s.a.Component),f=(a(34),a(36),function(e){return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()}),y=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},b=(a(38),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"loading-background"},s.a.createElement("div",{className:"loading-wrapper"},s.a.createElement("div",{className:"loading-inner"})))}}]),t}(s.a.Component)),k=(a(40),document.getElementById("message-box-container")),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={animationClass:"hide"},a.messageBox=document.createElement("div"),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;"success"!==this.props.type&&"info"!==this.props.type||setTimeout(function(){e.closeMessageBox()},3e3),this.handleContainerClassChange("show"),k.appendChild(this.messageBox),setTimeout(function(){e.setState({animationClass:"show"})},10)}},{key:"componentWillUnmount",value:function(){this.handleContainerClassChange("hide")}},{key:"closeMessageBox",value:function(){var e=this;this.setState({animationClass:"hide"}),setTimeout(function(){e.props.onClose(),k.contains(e.messageBox)&&k.removeChild(e.messageBox)},1e3)}},{key:"handleBoxClick",value:function(){this.closeMessageBox()}},{key:"handleContainerClassChange",value:function(e){"show"===e.toLowerCase()?(k.classList.add("show"),k.classList.remove("hide")):"hide"===e.toLowerCase()&&(k.classList.add("hide"),k.classList.remove("show"))}},{key:"render",value:function(){var e=this;return o.a.createPortal(s.a.createElement("div",{onClick:function(){return e.handleBoxClick()},className:"message-box-content "+this.props.type+"  "+this.state.animationClass},s.a.createElement("div",{className:"message-box-message"},s.a.createElement("span",{className:"message-type"},this.props.type.charAt(0).toUpperCase()+this.props.type.slice(1)+": "),this.props.message)),this.messageBox)}}]),t}(s.a.Component);E.defaultProps={type:"info",message:"Message text"};var O=E,C=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={note:"",isLoading:!1,messageBox:{show:!1,type:"",message:""}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"showMessageBox",value:function(e,t){var a=this.state.messageBox;a.show=!0,a.type=e,a.message=t,this.setState({messageBox:a})}},{key:"hideMessageBox",value:function(){var e=this.state.messageBox;e.show=!1,e.message="",this.setState({messageBox:e})}},{key:"emptyTextArea",value:function(){this.setState({note:""})}},{key:"stopLoading",value:function(){this.setState({isLoading:!1})}},{key:"updateNote",value:function(e){this.setState({note:e.target.value})}},{key:"submitNote",value:function(e){var t=this;if(e.preventDefault(),""!==this.state.note){var a={};a.dayId=f(this.props.activeDate),a.noteContent=this.state.note;var n,s=this.emptyTextArea.bind(this),i=this.stopLoading.bind(this),o=this.showMessageBox.bind(this);this.setState({isLoading:!0}),this.props.authenticationService.getCurrentUser().then(function(e){n=e,t.props.notesService.addNote(a,n).then(function(e){o("success","Added a note"),s(),i()},function(e){o("error","Could not add note")})},function(e){o("error","You are not logged in")})}}},{key:"render",value:function(){var e,t,a=this;return this.state.messageBox.show&&(t=s.a.createElement(O,{onClose:function(){return a.hideMessageBox()},type:this.state.messageBox.type,message:this.state.messageBox.message})),e=this.state.isLoading?s.a.createElement(b,null):s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{value:this.state.note,rows:"3",className:"form-control",onChange:function(e){return a.updateNote(e)}})),s.a.createElement("form",{className:"add-note-form"},t,e,s.a.createElement("button",{onClick:function(e){return a.submitNote(e)},className:"btn btn-primary"},"Add note"))}}]),t}(s.a.Component),S=a(7),j=(a(42),a(16)),N=(a(44),a(11)),M=a(13),w=a(14);N.b.add(w.a,w.b);var I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={pager:{}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.items&&this.props.items.length&&this.resetPage()}},{key:"componentDidUpdate",value:function(e,t){this.props.items!==e.items&&this.resetPage()}},{key:"resetPage",value:function(){this.setPage(this.props.initialPage)}},{key:"setPage",value:function(e){var t=this.props,a=t.items,n=t.pageSize,s=this.state.pager;if(!(e<1||e>s.totalPages)){var i;i=this.state.pager.currentPage<e?"animate-left":this.state.pager.currentPage>e?"animate-right":"",s=this.getPager(a.length,e,n);var o=a.slice(s.startIndex,s.endIndex+1);this.setState({pager:s}),this.props.onChangePage(o,i)}}},{key:"getPager",value:function(e,t,a){t=t||1,a=a||10;var n,s,i=Math.ceil(e/a);i<=10?(n=1,s=i):t<=6?(n=1,s=10):t+4>=i?(n=i-9,s=i):(n=t-5,s=t+4);var o=(t-1)*a,r=Math.min(o+a-1,e-1),c=Object(j.a)(Array(s+1-n).keys()).map(function(e){return n+e});return{totalItems:e,currentPage:t,pageSize:a,totalPages:i,startPage:n,endPage:s,startIndex:o,endIndex:r,pages:c}}},{key:"render",value:function(){var e=this,t=this.state.pager;return!t.pages||t.pages.length<=1?null:s.a.createElement("ul",{className:"pagination"},s.a.createElement("div",{className:"pag-wrapper"},s.a.createElement("li",{className:1===t.currentPage?"disabled":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(t.currentPage-1)}},s.a.createElement(M.a,{icon:"angle-left"}))),t.pages.map(function(a,n){return s.a.createElement("li",{key:n,className:t.currentPage===a?"active":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(a)}},a))}),s.a.createElement("li",{className:t.currentPage===t.totalPages?"disabled":""},s.a.createElement("a",{href:"#",onClick:function(){return e.setPage(t.currentPage+1)}},s.a.createElement(M.a,{icon:"angle-right"})))))}}]),t}(s.a.Component);I.defaultProps={initialPage:1,pageSize:10};var L=I,P=(a(49),document.getElementById("modals")),D=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isShown:!1,animationClass:"hide",transitionEnded:!1},a.modal=document.createElement("div"),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){P.appendChild(this.modal)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.isOpen)this.setState({isShown:!0}),setTimeout(function(){t.setState({animationClass:"show"})},10);else{this.setState({animationClass:"hide"});setTimeout(function(){t.setState({isShown:!1})},300)}}},{key:"render",value:function(){return o.a.createPortal(s.a.createElement("div",{className:"modal-box-background ".concat(this.state.isShown?"shown":"")},s.a.createElement("div",{className:"modal-box-content ".concat(this.state.animationClass)},this.props.children)),this.modal)}}]),t}(s.a.Component),x=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:a.props.loggedInUser,isLoggedIn:a.props.isLoggedIn,notes:null,ajaxStarted:!1,currentNotesPage:[],notesAnimation:"",modalData:{isOpen:!1,idToDelete:"",animateClass:""},messageBox:{show:!1,type:"",message:""}},a.handlePageChange=a.handlePageChange.bind(Object(S.a)(Object(S.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"showMessageBox",value:function(e,t){var a=this.state.messageBox;a.show=!0,a.type=e,a.message=t,this.setState({messageBox:a})}},{key:"hideMessageBox",value:function(){var e=this.state.messageBox;e.show=!1,e.message="",this.setState({messageBox:e})}},{key:"initLoggedIn",value:function(){var e=this;return this.props.authenticationService.getCurrentUser().then(function(t){e.setState({loggedInUser:t}),e.fetchNotes().then(function(t){return e.setState({notes:t})})},function(e){alert("Couldnt get current user ==> VIEW")})}},{key:"componentWillMount",value:function(){this.props.isLoggedIn&&this.initLoggedIn()}},{key:"componentWillUpdate",value:function(e){var t=this;this.state.isLoggedIn&&!this.state.loggedInUser&&this.props.authenticationService.getCurrentUser().then(function(e){t.setState({loggedInUser:e})},function(e){alert("Couldnt get current user ==> VIEW")}),e.isLoggedIn!==this.state.isLoggedIn&&(e.isLoggedIn?e.isLoggedIn&&this.props.authenticationService.getCurrentUser().then(function(e){t.fetchNotes(e).then(function(e){return t.setState({notes:e})}),t.setState({isLoggedIn:!0,loggedInUser:e})},function(e){alert("Couldnt get current user ==> VIEW")}):this.setState({isLoggedIn:!1,loggedInUser:null,notes:null})),this.state.isLoggedIn&&this.state.loggedInUser&&(y(this.props.activeDate,e.activeDate)||this.setState({notes:null,ajaxStarted:!1}),this.state.notes&&(!e.isThisViewActive||this.props.isThisViewActive)||this.state.ajaxStarted||e===this.props||(this.setState({ajaxStarted:!0}),this.fetchNotes().then(function(e){t.setState({ajaxStarted:!1}),e.equals(t.state.notes)||t.setState({notes:e})},function(e){alert("failed to fetch notes"),console.log(e)})))}},{key:"componentDidUpdate",value:function(){var e=this;""!==this.state.notesAnimation&&setTimeout(function(){return e.setState({notesAnimation:""})},550)}},{key:"deleteNote",value:function(e){var t=this,a=this.showMessageBox.bind(this),n=this.hideMessageBox.bind(this);this.props.notesService.deleteNote(e,this.state.loggedInUser).then(function(e){a("success","Deleted note"),t.fetchNotes().then(function(e){return t.setState({notes:e})}),t.closeModal()},function(e){n("error","Failed to delete note")})}},{key:"openModal",value:function(e){var t=this.state.modalData;t.isOpen=!0,t.idToDelete=e,t.animateClass="show",this.setState({modalData:t})}},{key:"closeModal",value:function(){var e=this.state.modalData;e.isOpen=!1,e.animateClass="hide",this.setState({modalData:e})}},{key:"handlePageChange",value:function(e,t){this.setState({currentNotesPage:e,notesAnimation:t})}},{key:"fetchNotes",value:function(e){return e?this.props.notesService.getNotesForUserById(e.id,f(this.props.activeDate),e.authToken):this.props.notesService.getNotesForUserById(this.state.loggedInUser.id,f(this.props.activeDate),this.state.loggedInUser.authToken)}},{key:"renderNotes",value:function(){var e=this;if(!this.state.isLoggedIn)return"Login to add some notes";if(null!==this.state.notes){if(0===this.state.notes.length)return"No notes for this day yet";var t=[];t.push(s.a.createElement(L,{key:"pag-notes",items:this.state.notes,onChangePage:this.handlePageChange,pageSize:5}));var a=[s.a.createElement("div",{key:"note-anim-div",className:"note-anim "+this.state.notesAnimation},this.state.currentNotesPage.map(function(t){return s.a.createElement("li",{key:t._id},t.noteContent,s.a.createElement("span",{key:"dada",className:"delete-note-btn",onClick:function(){return e.openModal(t._id)}},s.a.createElement("span",{key:"nene",className:"tooltip"},"Delete this note"),s.a.createElement("a",{href:"#"},"X")))}))];return t.push(a),t}return s.a.createElement(b,null)}},{key:"render",value:function(){var e,t=this;return this.state.messageBox.show&&(e=s.a.createElement(O,{onClose:function(){return t.hideMessageBox()},type:this.state.messageBox.type,message:this.state.messageBox.message})),s.a.createElement("ul",{className:"notes-list"},e,this.renderNotes(),s.a.createElement(D,{isOpen:this.state.modalData.isOpen,closeFunction:function(){return t.closeModal()}},s.a.createElement("div",{className:"delete-confirmation-modal"},s.a.createElement("div",{className:"delete-confirmation-modal-header"},s.a.createElement("p",null,"Are you sure?"),s.a.createElement("span",null,s.a.createElement("a",{href:"#",onClick:function(){return t.closeModal()}},"X"))),s.a.createElement("div",{className:"delete-confirmation-modal-message"},"This will delete the note"),s.a.createElement("div",{className:"delete-confirmation-modal-footer"},s.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t.deleteNote(t.state.modalData.idToDelete)}},"Yes"),s.a.createElement("button",{className:"btn btn alert-primary",onClick:function(){return t.closeModal()}},"No")))))}}]),t}(s.a.Component),U=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getCurrentMonth",value:function(){return this.props.activeDate.getMonth()}},{key:"render",value:function(){return s.a.createElement("div",{className:this.props.currentClass},s.a.createElement("h3",null,p.MONTHS_MAP[this.getCurrentMonth()].toString().substr(0,3)),s.a.createElement("p",{className:"day-paragraph"},this.props.activeDate.getDate()))}}]),t}(s.a.Component),B=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={animateClass:"",oldDate:new Date,display:{isFlipped:!1}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillUpdate",value:function(e){var t=this;if(e.activeDate!==this.props.activeDate){this.setState({animateClass:"calendar-block-animate"});setTimeout(function(){t.setState({animateClass:""}),t.setState({oldDate:e.activeDate})},950)}}},{key:"switchView",value:function(){var e=this.state.display;e.isFlipped=!e.isFlipped,this.setState({display:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"status-container"},s.a.createElement("div",{className:"block-container"},s.a.createElement(U,{currentClass:"calendar-block old-calendar-block",activeDate:this.props.activeDate}),s.a.createElement(U,{currentClass:"calendar-block "+this.state.animateClass,activeDate:this.state.oldDate})),s.a.createElement("div",{className:"notes-container"},s.a.createElement("button",{className:"switch-view ".concat(this.props.isLoggedIn?" enabled":" disabled"),onClick:function(){return e.switchView()}},this.state.display.isFlipped?"Go back to notes":"Add note for this day"),s.a.createElement("div",{className:"view-note-container\n                        ".concat(this.state.display.isFlipped?"flipped":"")},s.a.createElement("div",{className:"notes-view"},s.a.createElement(x,{isLoggedIn:this.props.isLoggedIn,authenticationService:this.props.authenticationService,notesService:this.props.notesService,activeDate:this.props.activeDate,isThisViewActive:!this.state.display.isFlipped})),s.a.createElement("div",{className:"save-note back"},s.a.createElement(C,{authenticationService:this.props.authenticationService,notesService:this.props.notesService,activeDate:this.props.activeDate}),s.a.createElement("button",{className:"btn btn-primary"},"Save day to my days")))))}}]),t}(s.a.Component),T=a(8),A=a.n(T),F="https://baas.kinvey.com/",H="kid_r1ynbbg6Q",W={Authorization:"Basic "+btoa(H+":33903aebaffd4a3b944250b832bd81f3")},V=(btoa(H+":f55dd3810f61465c98c4fec7525a6ba9"),function(e){return A.a.ajax({method:"POST",url:F+"user/"+H+"/login",headers:W,data:e})}),Y=function(e){return A.a.ajax({method:"POST",url:F+"user/"+H,headers:W,data:e})},_=function(e){return A.a.ajax({method:"POST",url:F+"user/"+H+"/_logout",headers:e})},R=function(e,t,a){return A.a.ajax({method:"GET",url:F+"appdata/"+H+'/notes/?query={"dayId":"'.concat(t,'","_acl.creator":"').concat(e,'"}'),headers:a})},z=function(e,t){return A.a.ajax({method:"POST",url:F+"appdata/"+H+"/notes",headers:t,data:e})},G=function(e,t){return A.a.ajax({method:"POST",url:F+"appdata/"+H+"/days-notes",headers:t,data:e})},q=function(e,t,a){return A.a.ajax({method:"DELETE",url:F+"appdata/"+H+"/"+e+"/"+t,headers:a})},J=function(e){var t={Authorization:"Kinvey "+e};return A.a.ajax({method:"GET",url:F+"user/"+H+"/_me",headers:t})},K=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={activeDate:new Date,daysInCurrentMonth:{},year:(new Date).getFullYear(),month:(new Date).getMonth(),animation:{moveYear:"",moveMonth:""}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({daysInCurrentMonth:this.createCurrentMonthObject()})}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.animation;""!==t.moveYear&&setTimeout(function(){t.moveYear="",e.setState({animation:t})},1e3),""!==t.moveMonth&&setTimeout(function(){t.moveMonth="",e.setState({animation:t})},1e3)}},{key:"updateYear",value:function(e){var t=this.state.animation;t.moveYear=e<0?"year-left":"year-right",this.setState({year:this.state.year+e,currentMonth:this.createCurrentMonthObject(),animation:t})}},{key:"updateMonth",value:function(e){var t=this.state.animation;t.moveMonth=e<0?"month-left":"month-right";var a,n=this.state.year;0===this.state.month&&-1===e?(a=11,n=this.state.year-1):11===this.state.month&&1===e?(a=0,n=this.state.year+1):a=this.state.month+e,this.setState({month:a,year:n})}},{key:"createCurrentMonthObject",value:function(){for(var e=[],t=6-new Date(this.state.year,this.state.month,this.getDaysInMonth()-1).getDay(),a=this.getDaysInMonth(this.state.month-1),n=a-this.getFirstDayOfMonth()+1;n<=a;n++)e.push({dayValue:n,dayClass:"last-month"});for(var s=1;s<=this.getDaysInMonth();s++){var i=new Date,o=new Date(this.state.year,this.state.month,s),r="current-month";s===i.getDate()&&this.state.month===i.getMonth()&&this.state.year===i.getFullYear()&&(r+=" today"),y(this.state.activeDate,o)&&(r+=" active"),e.push({dayValue:s,dayClass:r})}for(var c=1;c<=t;c++)e.push({dayValue:c,dayClass:"next-month"});return e}},{key:"getDaysInMonth",value:function(e){return null!=e?(-1===e&&(e=11),new Date(this.state.year,e+1,0).getDate()):new Date(this.state.year,this.state.month+1,0).getDate()}},{key:"getFirstDayOfMonth",value:function(){return new Date(this.state.year,this.state.month,0).getDay()}},{key:"handleDayBlockClicked",value:function(e){if(e.props.id.startsWith("d-")&&e.props.className.includes("current-month")){var t=new Date(this.state.year,this.state.month,e.props.value);this.setState({activeDate:t})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendar-container"},s.a.createElement("div",{className:"body-container"},s.a.createElement("div",{className:"calendar-header"},s.a.createElement("div",{className:"year"},s.a.createElement("button",{onClick:function(){return e.updateYear(-1)}}),s.a.createElement("p",{className:this.state.animation.moveYear},this.state.year),s.a.createElement("button",{onClick:function(){return e.updateYear(1)}})),s.a.createElement("div",{className:"month"},s.a.createElement("button",{onClick:function(){return e.updateMonth(-1)}}),s.a.createElement("p",{className:this.state.animation.moveMonth},p.MONTHS_MAP[this.state.month]),s.a.createElement("button",{onClick:function(){return e.updateMonth(1)}}))),s.a.createElement(v,{clickHandler:this.handleDayBlockClicked.bind(this),currentMonth:this.createCurrentMonthObject()})),s.a.createElement(B,{isLoggedIn:this.props.isLoggedIn,activeDate:this.state.activeDate,notesService:this.props.notesService,authenticationService:this.props.authenticationService}))}}]),t}(s.a.Component),X=(a(52),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.bindCustomArrayEqualsMethod()}},{key:"bindCustomArrayEqualsMethod",value:function(){Array.prototype.equals=function(e){if(!e)return!1;if(this.length!==e.length)return!1;for(var t=0,a=this.length;t<a;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]===e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"calendar-app-container"},s.a.createElement(m,null),s.a.createElement(K,{isLoggedIn:this.props.isLoggedIn,authenticationService:this.props.authenticationService,notesService:this.props.notesService}))}}]),t}(n.Component)),Q=(a(54),function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"loginUser",value:function(e){var t=this.setToken;return new Promise(function(a,n){V(e).then(function(e){var n=e._kmd.authtoken;t(n),a(n)},function(e){alert("failed to login"),console.log(e),n(e)})})}},{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"logout",value:function(){var e=this;return new Promise(function(t,a){var n={Authorization:"Kinvey "+e.getToken()};_(n).then(function(e){localStorage.removeItem("user_token"),t(e)},function(e){alert("failed to logout"),a(e)})})}},{key:"setToken",value:function(e){localStorage.setItem("user_token",e)}},{key:"getToken",value:function(){return localStorage.getItem("user_token")}},{key:"getCurrentUser",value:function(){var e=this;if(this.isLoggedIn())return new Promise(function(t,a){J(e.getToken()).then(function(a){var n={};n.id=a._id,n.authToken=a._kmd.authtoken,n.authToken=e.getToken(),t(n)},function(e){alert("error getting currently logged in user"),console.log(e),a(e)})})}}]),e}()),$=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={startLoading:!1,loginUsername:"",loginPassword:""},a.handleUsernameChange=a.handleUsernameChange.bind(Object(S.a)(Object(S.a)(a))),a.handlePasswordChange=a.handlePasswordChange.bind(Object(S.a)(Object(S.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"stopLoading",value:function(){this.setState({startLoading:!1})}},{key:"loginUser",value:function(){var e={username:this.state.loginUsername,password:this.state.loginPassword},t=this.props.closeModal,a=this.stopLoading.bind(this),n=this.props.loginHandler;this.setState({startLoading:!0}),this.props.authenticationService.loginUser(e).then(function(e){a(),t(),n()},function(e){a(),alert("ERROR LOGGING IN MAYBE WRONG CREDENTIALS"),console.log(e)})}},{key:"handleUsernameChange",value:function(e){var t=e.target.value;this.setState({loginUsername:t})}},{key:"handlePasswordChange",value:function(e){var t=btoa(e.target.value);this.setState({loginPassword:t})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"user-form user-login-form"},this.state.startLoading?s.a.createElement(b,null):"",s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"login-username"},"Username:"),s.a.createElement("input",{className:"form-control",id:"login-username",type:"text",placeholder:"username",onChange:this.handleUsernameChange})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"login-password"},"Password:"),s.a.createElement("input",{className:"form-control",id:"login-password",type:"password",placeholder:"password",onChange:this.handlePasswordChange})),s.a.createElement("div",{className:"form-group pl-1"},s.a.createElement("button",{onClick:function(){return e.loginUser()},className:"btn btn-primary"},"Login"),s.a.createElement("button",{onClick:function(){return e.props.closeModal()},className:"btn btn-primary"},"Cancel")))}}]),t}(s.a.Component),Z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={registerUsername:"",registerPassword:"",registerEmail:""},a.handleUsernameChange=a.handleUsernameChange.bind(Object(S.a)(Object(S.a)(a))),a.handlePasswordChange=a.handlePasswordChange.bind(Object(S.a)(Object(S.a)(a))),a.handleEmailChange=a.handleEmailChange.bind(Object(S.a)(Object(S.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"registerUser",value:function(){if(this.isUsernameValid()&&this.isPasswordValid()&&this.isEmailValid()){var e={username:this.state.registerUsername,password:this.state.registerPassword,email:this.state.registerEmail},t=this.props.closeModal;this.props.registrationService.registerUser(e).then(function(e){t()},function(e){alert("registration failed"),console.log(e)})}}},{key:"handleUsernameChange",value:function(e){var t=e.target.value;this.setState({registerUsername:t})}},{key:"handlePasswordChange",value:function(e){var t=btoa(e.target.value);this.setState({registerPassword:t})}},{key:"handleEmailChange",value:function(e){var t=e.target.value;this.setState({registerEmail:t})}},{key:"isUsernameValid",value:function(){return!0}},{key:"isPasswordValid",value:function(){return!0}},{key:"isEmailValid",value:function(){return!0}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"user-form user-login-form"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-username"},"Username:"),s.a.createElement("input",{className:"form-control",id:"register-username",type:"text",placeholder:"username",onChange:this.handleUsernameChange})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-password"},"Password:"),s.a.createElement("input",{className:"form-control",id:"register-password",type:"password",placeholder:"password",onChange:this.handlePasswordChange})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"register-password"},"Password:"),s.a.createElement("input",{className:"form-control",id:"register-email",type:"email",placeholder:"Email",onChange:this.handleEmailChange})),s.a.createElement("div",{className:"form-group pl-1"},s.a.createElement("button",{onClick:function(){return e.registerUser()},className:"btn btn-primary"},"Register"),s.a.createElement("button",{onClick:function(){return e.props.closeModal()},className:"btn btn-primary"},"Cancel")))}}]),t}(s.a.Component),ee=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isLoggedIn:!1,isLoginModalOpen:!1,isRegisterModalOpen:!1,mouseOver:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({isLoggedIn:this.props.isLoggedIn})}},{key:"componentWillUpdate",value:function(e){this.state.isLoggedIn!==e.isLoggedIn&&this.setState({isLoggedIn:e.isLoggedIn})}},{key:"closeModal",value:function(e){switch(e.toLowerCase()){case"login":this.state.isLoginModalOpen&&this.setState({isLoginModalOpen:!1});break;case"register":this.state.isRegisterModalOpen&&this.setState({isRegisterModalOpen:!1})}}},{key:"openModal",value:function(e){switch(e.toLowerCase()){case"login":this.state.isLoginModalOpen||this.setState({isLoginModalOpen:!0});break;case"register":this.state.isRegisterModalOpen||this.setState({isRegisterModalOpen:!0})}}},{key:"logout",value:function(){var e=this.changeLogoutState.bind(this),t=this.props.userChangeHandler;this.props.authenticationService.logout().then(function(){e(),t()})}},{key:"changeLogoutState",value:function(){this.setState({isLoggedIn:!1})}},{key:"handleMouseOver",value:function(){this.setState({mouseOver:!0})}},{key:"handleMouseLeave",value:function(){this.setState({mouseOver:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{onMouseEnter:function(){return e.handleMouseOver()},onMouseLeave:function(){return e.handleMouseLeave()},className:"user-navigation-container ".concat(this.state.mouseOver?"show":"hide")},s.a.createElement("span",null,"NAVIGATION"),s.a.createElement("ul",{className:"user-nav"},s.a.createElement("li",{className:"user-nav-link ".concat(this.state.isLoggedIn?"hidden":"")},s.a.createElement("a",{href:"#",onClick:function(){return e.openModal("login")}},"Login")),s.a.createElement("li",{className:"user-nav-link ".concat(this.state.isLoggedIn?"hidden":"")},s.a.createElement("a",{onClick:function(){return e.openModal("register")},href:"#"},"Register")),s.a.createElement("li",{className:"user-nav-link ".concat(this.state.isLoggedIn?"":"hidden")},s.a.createElement("a",{onClick:function(){return e.logout()},href:"#"},"Logout"))),s.a.createElement(D,{isOpen:this.state.isRegisterModalOpen,closeFunction:function(){return e.closeModal("register")}},s.a.createElement(Z,{closeModal:function(){return e.closeModal("register")},registrationService:this.props.registrationService})),s.a.createElement(D,{isOpen:this.state.isLoginModalOpen,closeFunction:function(){return e.closeModal("Login")}},s.a.createElement($,{loginHandler:this.props.userChangeHandler,closeModal:function(){return e.closeModal("login")},authenticationService:this.props.authenticationService})))}}]),t}(n.Component),te=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"registerUser",value:function(e){return new Promise(function(t,a){Y(e).then(function(e){t(e)},function(e){a(e)})})}}]),e}(),ae=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"generateHeaders",value:function(e){return{Authorization:"Kinvey "+e}}},{key:"addNote",value:function(e,t){var a=this.generateHeaders(t.authToken);return new Promise(function(t,n){z(e,a).then(function(e){var n={dayId:e.dayId,noteId:e._id};t(G(n,a))},function(e){n(e),console.log(e)})})}},{key:"getNotesForUserById",value:function(e,t,a){var n=this.generateHeaders(a);return new Promise(function(a,s){R(e,t,n).then(function(e){a(e)},function(e){s(e)})})}},{key:"deleteNote",value:function(e,t){var a=this.generateHeaders(t.authToken);return new Promise(function(t,n){q("notes",e,a).then(function(e){t(e)},function(e){n(e)})})}}]),e}(),ne=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n=new Q,s=new te,i=new ae;return a.state={isLoggedIn:!1,authenticationService:n,registrationService:s,notesService:i},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({isLoggedIn:this.state.authenticationService.isLoggedIn()})}},{key:"userChangeHandler",value:function(){this.setState({isLoggedIn:this.state.authenticationService.isLoggedIn()})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"app-container"},s.a.createElement(ee,{isLoggedIn:this.state.isLoggedIn,userChangeHandler:function(){return e.userChangeHandler()},authenticationService:this.state.authenticationService,registrationService:this.state.registrationService}),s.a.createElement(X,{isLoggedIn:this.state.isLoggedIn,authenticationService:this.state.authenticationService,notesService:this.state.notesService}))}}]),t}(n.Component);o.a.render(s.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[17,2,1]]]);
//# sourceMappingURL=main.7cf91ee6.chunk.js.map